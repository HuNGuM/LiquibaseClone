2025-01-22 19:21:56 ERROR org.example.migration.MigrationMain - Usage: java MigrationCLI <operation>
2025-01-22 19:21:56 ERROR org.example.migration.MigrationMain - Available operations: run
2025-01-22 19:22:00 ERROR org.example.migration.MigrationMain - Usage: java MigrationCLI <operation>
2025-01-22 19:22:00 ERROR org.example.migration.MigrationMain - Available operations: run
2025-01-22 19:22:47 ERROR org.example.migration.MigrationMain - Usage: java MigrationCLI <operation>
2025-01-22 19:22:47 ERROR org.example.migration.MigrationMain - Available operations: run
2025-01-22 19:33:16 ERROR org.example.migration.MigrationMain - Необходимы два аргумента: путь к исходным данным и путь к целевому расположению!
2025-01-22 19:34:00 INFO  org.example.migration.MigrationMain - Использование: migrate
2025-01-22 19:35:59 INFO  org.example.migration.MigrationMain - Использование: migrate
2025-01-22 19:36:20 INFO  org.example.migration.MigrationMain - Запуск миграции...
2025-01-22 19:36:21 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-22 19:36:21 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-22 19:36:21 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-22 19:36:21 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-22 19:36:21 INFO  org.example.migration.MigrationMain - Миграция успешно завершена.
2025-01-22 19:37:13 INFO  org.example.migration.MigrationMain - Запуск миграции...
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-22 19:37:14 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-22 19:37:14 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-22 19:37:14 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-22 19:37:14 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-22 19:37:14 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-22 19:37:14 INFO  org.example.migration.MigrationMain - Миграция успешно завершена.
2025-01-22 19:44:30 INFO  org.example.migration.MigrationMain - Запуск миграции...
2025-01-22 19:44:31 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-22 19:44:31 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-22 19:44:31 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-22 19:44:31 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-22 19:44:31 INFO  org.example.migration.MigrationMain - Миграция успешно завершена.
2025-01-22 19:46:04 INFO  org.example.migration.MigrationMain - Запуск миграции...
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-22 19:46:05 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-22 19:46:05 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-22 19:46:05 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-22 19:46:05 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-22 19:46:05 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-22 19:46:05 INFO  org.example.migration.MigrationMain - Миграция успешно завершена.
2025-01-22 19:46:13 INFO  org.example.migration.MigrationMain - Запуск миграции...
2025-01-22 19:46:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-22 19:46:14 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-22 19:46:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-22 19:46:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-22 19:46:14 INFO  org.example.migration.MigrationMain - Миграция успешно завершена.
2025-01-23 19:38:52 INFO  org.example.migration.MigrationMain - Запуск миграции...
2025-01-23 19:38:53 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-23 19:38:53 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-23 19:38:53 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-23 19:38:53 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-23 19:38:53 INFO  org.example.migration.MigrationMain - Миграция успешно завершена.
2025-01-25 12:12:58 INFO  org.example.migration.MigrationMain - Запуск миграции...
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-25 12:12:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-25 12:12:59 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-25 12:12:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-25 12:12:59 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-25 12:12:59 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-25 12:12:59 INFO  org.example.migration.MigrationMain - Миграция успешно завершена.
2025-01-26 10:09:59 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:09:59 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:09:59 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:09:59 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:10:08 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 10:10:08 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:10:08 INFO  o.example.migration.MigrationManager - Found 2 migration files.
2025-01-26 10:10:08 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 10:10:08 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 10:10:08 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 10:10:35 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:10:36 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:10:36 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:10:36 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:10:52 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 10:11:30 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-25T10:00
2025-01-26 10:11:30 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:11:30 INFO  o.example.migration.MigrationManager - Found 2 migrations to rollback.
2025-01-26 10:11:30 WARN  o.example.migration.MigrationManager - Rollback script not found for version 2: R2__rollback.sql
2025-01-26 10:11:30 WARN  o.example.migration.MigrationManager - Rollback script not found for version 1: R1__rollback.sql
2025-01-26 10:11:30 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-25T10:00
2025-01-26 10:15:13 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:15:14 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:15:14 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:15:14 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:15:19 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 10:15:32 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T10:00
2025-01-26 10:15:32 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:15:32 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T10:00
2025-01-26 10:15:32 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T10:00
2025-01-26 10:16:20 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:16:21 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:16:21 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:16:21 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:16:25 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 10:16:32 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T09:00
2025-01-26 10:16:32 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:16:32 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T09:00
2025-01-26 10:16:32 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T09:00
2025-01-26 10:17:37 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:17:38 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:17:38 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:17:38 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:17:42 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 10:17:49 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T09:00
2025-01-26 10:17:49 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:17:49 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T09:00
2025-01-26 10:17:49 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T09:00
2025-01-26 10:19:27 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:19:28 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:19:28 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:19:28 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:19:34 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 10:19:34 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:19:34 INFO  o.example.migration.MigrationManager - Found 3 migration files.
2025-01-26 10:19:34 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 10:19:34 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 10:19:34 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 10:19:56 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:19:57 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:19:57 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:19:57 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:20:01 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 10:20:01 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:20:01 INFO  o.example.migration.MigrationManager - Found 3 migration files.
2025-01-26 10:20:01 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 10:20:01 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 10:20:01 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 10:20:33 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:20:34 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:20:34 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:20:34 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:20:38 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Found 3 migration files.
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-26 10:20:38 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-26 10:20:38 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-26 10:20:38 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-26 10:20:38 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-26 10:20:38 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-26 10:20:38 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 10:20:48 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:20:49 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:20:49 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:20:49 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:20:54 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 10:21:18 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T10:19
2025-01-26 10:21:18 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:21:18 INFO  o.example.migration.MigrationManager - Found 2 migrations to rollback.
2025-01-26 10:21:18 WARN  o.example.migration.MigrationManager - Rollback script not found for version 2: R2__rollback.sql
2025-01-26 10:21:18 INFO  o.example.migration.MigrationManager - Rolling back migration version 1 using file R1__rollback.sql
2025-01-26 10:21:18 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: 
2025-01-26 10:21:18 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:21:18 INFO  o.example.migration.MigrationManager - Rolled back migration version 1 successfully.
2025-01-26 10:21:18 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T10:19
2025-01-26 10:23:08 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:23:09 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:23:09 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:23:09 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:23:13 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 10:23:28 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T10:19
2025-01-26 10:23:28 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:23:28 INFO  o.example.migration.MigrationManager - Found 1 migrations to rollback.
2025-01-26 10:23:28 INFO  o.example.migration.MigrationManager - Rolling back migration version 2 using file R2__rollback.sql
2025-01-26 10:23:28 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R2__rollback_initial_schema.sql

-- Удаление уникального индекса на поле "name" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_name;

-- Снятие NOT NULL ограничения с поля "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name DROP NOT NULL;

-- Удаление ограничения на длину имени в таблице "departments"
ALTER TABLE departments DROP CONSTRAINT IF EXISTS chk_departments_name_length;

-- Удаление индекса на поле "department_id" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_department_id;

-- Удаление ограничений внешнего ключа из таблицы "employee_projects"
ALTER TABLE employee_projects
    DROP CONSTRAINT IF EXISTS fk_employee,
    DROP CONSTRAINT IF EXISTS fk_project;

-- Удаление уникального индекса на поля "employee_id" и "project_id" в таблице "employee_projects"
DROP INDEX IF EXISTS idx_employee_projects;
2025-01-26 10:23:28 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:23:28 INFO  o.example.migration.MigrationManager - Rolled back migration version 2 successfully.
2025-01-26 10:23:28 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T10:19
2025-01-26 10:25:11 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:25:11 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:25:11 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:25:11 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:25:24 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-26 10:25:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-26 10:25:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-26 10:25:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-26 10:25:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-26 10:25:24 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-26 10:25:24 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 10:25:35 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 10:25:35 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 10:25:35 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 10:25:35 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 10:25:40 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 10:25:54 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T10:25
2025-01-26 10:25:54 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 10:25:54 INFO  o.example.migration.MigrationManager - Found 2 migrations to rollback.
2025-01-26 10:25:54 INFO  o.example.migration.MigrationManager - Rolling back migration version 2 using file R2__rollback.sql
2025-01-26 10:25:54 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R2__rollback_initial_schema.sql

-- Удаление уникального индекса на поле "name" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_name;

-- Снятие NOT NULL ограничения с поля "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name DROP NOT NULL;

-- Удаление ограничения на длину имени в таблице "departments"
ALTER TABLE departments DROP CONSTRAINT IF EXISTS chk_departments_name_length;

-- Удаление индекса на поле "department_id" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_department_id;

-- Удаление ограничений внешнего ключа из таблицы "employee_projects"
ALTER TABLE employee_projects
    DROP CONSTRAINT IF EXISTS fk_employee,
    DROP CONSTRAINT IF EXISTS fk_project;

-- Удаление уникального индекса на поля "employee_id" и "project_id" в таблице "employee_projects"
DROP INDEX IF EXISTS idx_employee_projects;
2025-01-26 10:25:54 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:25:54 INFO  o.example.migration.MigrationManager - Rolled back migration version 2 successfully.
2025-01-26 10:25:54 INFO  o.example.migration.MigrationManager - Rolling back migration version 1 using file R1__rollback.sql
2025-01-26 10:25:54 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R1__rollback_initial_schema.sql

-- Удаление всех данных из таблицы "employee_projects"
DELETE FROM employee_projects;

-- Удаление всех данных из таблицы "employees"
DELETE FROM employees;

-- Удаление всех данных из таблицы "projects"
DELETE FROM projects;

-- Удаление всех данных из таблицы "departments"
DELETE FROM departments;

-- Удаление таблицы "employee_projects"
DROP TABLE IF EXISTS employee_projects;

-- Удаление таблицы "employees"
DROP TABLE IF EXISTS employees;

-- Удаление таблицы "projects"
DROP TABLE IF EXISTS projects;

-- Удаление таблицы "departments"
DROP TABLE IF EXISTS departments;

2025-01-26 10:25:54 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 10:25:54 INFO  o.example.migration.MigrationManager - Rolled back migration version 1 successfully.
2025-01-26 10:25:54 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T10:25
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:11:17 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:11:17 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:13:23 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:13:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:14:28 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:14:28 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:06 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:16:06 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:17 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:16:17 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:16:25 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:16:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:27 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:16:27 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:16:53 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:16:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:16:55 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:16:55 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:21:07 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:21:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:21:09 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:21:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:41:02 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:41:02 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:41:13 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:41:13 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:42:52 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:42:52 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:42:52 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:43:56 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:43:56 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:43:58 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:43:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 11:43:58 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 11:43:58 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 11:43:58 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 11:43:58 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 11:43:58 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:49:30 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:49:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:49:32 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:49:32 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 11:49:32 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 11:49:32 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 11:49:32 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 11:49:32 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 11:49:32 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 11:51:36 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 11:51:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 11:51:37 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 11:51:37 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 11:51:38 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 11:51:38 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 11:51:38 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 11:51:38 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 11:51:38 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:15:41 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:15:42 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:15:42 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:15:42 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:15:44 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:15:44 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:15:44 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:15:44 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:15:44 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) [1, 'Test Name']"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-200]
2025-01-26 12:15:44 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:15:45 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:15:45 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:15:45 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:15:45 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:15:45 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:15:45 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:15:45 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:22:51 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:22:52 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:23:12 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:23:13 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:23:19 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:23:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:23:20 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:23:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:23:21 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:23:21 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:23:22 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:23:22 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:23:22 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:23:22 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:23:22 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:23:22 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:23:22 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:25:45 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:25:46 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:25:46 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:25:46 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:25:54 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:25:55 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:27:18 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:27:18 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:27:18 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:23 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:27:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:27:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:27:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:27:25 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:27:25 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:27:26 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:27:26 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:27:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:27:26 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:27:26 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:27:26 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:27:26 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:27:26 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:27:53 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:27:53 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:27:53 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:27:53 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:28:05 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-26 12:28:05 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-26 12:28:05 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-26 12:28:05 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-26 12:28:05 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-26 12:28:05 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-26 12:28:05 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 12:29:22 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:29:23 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:29:23 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:29:23 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:29:25 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:29:25 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:29:25 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:29:25 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:29:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:29:25 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:29:25 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:29:25 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:29:25 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:29:25 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:32:33 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:32:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:32:34 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:32:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:32:36 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:32:36 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:32:36 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:32:37 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:32:37 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:32:37 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:32:37 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:32:37 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:32:37 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:32:37 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:32:55 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:32:56 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:32:56 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:32:56 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:32:57 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:32:57 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:32:58 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:32:58 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:32:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:32:58 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:32:58 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:32:58 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:32:58 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:32:58 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:33:22 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:33:23 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:33:23 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:33:23 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:33:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:33:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:33:25 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:33:25 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:33:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:33:25 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:33:25 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:33:25 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:33:25 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:33:25 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:35:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:35:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:35:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:35:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:35:26 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:35:26 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:35:26 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:35:26 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:35:27 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:35:27 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:35:27 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:35:27 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:35:27 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:35:27 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:35:27 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:41:07 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:41:07 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:41:07 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:41:07 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:41:09 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:41:09 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:41:09 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:41:09 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:41:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:41:09 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:41:09 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:41:09 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:41:09 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:41:09 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:41:09 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:41:10 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:41:10 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:41:10 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:41:10 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:41:10 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:41:10 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:43:08 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:43:09 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:43:09 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:43:09 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:43:10 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:43:10 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:43:12 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:43:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:43:13 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:43:13 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:43:13 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:43:13 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:43:13 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:43:53 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:43:53 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:53 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:43:54 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:43:54 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:43:54 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:43:55 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:43:55 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:43:56 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:43:56 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:43:56 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:43:56 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:43:56 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:43:56 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:43:56 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:46:42 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 12:46:43 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:46:43 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 12:46:43 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:46:45 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 12:46:45 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 12:46:46 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:46:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:46:47 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:46:47 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 12:46:47 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:46:47 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 12:46:47 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 12:46:47 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:46:47 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:46:47 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 12:46:47 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 12:46:47 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 12:46:47 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 12:53:39 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:53:40 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateInput(MigrationMainTest.java:61)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:53:40 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidChoice(MigrationMainTest.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:53:40 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrationsChoice(MigrationMainTest.java:31)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:53:40 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:53:40 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackChoice(MigrationMainTest.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:55:22 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:55:24 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateInput(MigrationMainTest.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:55:24 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidChoice(MigrationMainTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:55:24 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrationsChoice(MigrationMainTest.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:55:24 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:55:24 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackChoice(MigrationMainTest.java:48)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:57:36 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:57:37 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateInput(MigrationMainTest.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:57:37 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidChoice(MigrationMainTest.java:77)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:57:37 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrationsChoice(MigrationMainTest.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:57:37 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:57:37 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackChoice(MigrationMainTest.java:48)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:58:50 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:58:51 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:58:51 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:58:51 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:58:51 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrationsChoice(MigrationMainTest.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 12:59:46 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 12:59:48 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 12:59:48 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 12:59:48 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 12:59:48 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrationsChoice(MigrationMainTest.java:33)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:02:06 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:02:07 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:02:07 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:02:07 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:02:07 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:02:08 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:02:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:02:08 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:02:41 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:02:42 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:02:42 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:02:42 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:02:42 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:03:16 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:03:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:03:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:03:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:03:17 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:03:44 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:03:45 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:03:45 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:03:45 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:03:45 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:48)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:06:24 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:06:26 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:06:26 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:06:26 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:06:26 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:48)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:06:54 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:06:56 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:06:56 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:06:56 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:06:56 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:48)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:07:07 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:07:09 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:07:09 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:07:09 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:07:09 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:10:44 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:10:45 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:10:45 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:10:45 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:10:45 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 13:10:45 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:10:45 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:10:45 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:10:45 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:10:45 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 13:12:12 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:12:13 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-01T12:00
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-26 13:12:13 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-26 13:12:13 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-26 13:12:13 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-26 13:12:13 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-26 13:12:13 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-26 13:12:13 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 13:14:00 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:14:01 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:14:01 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:14:01 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:14:14 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 13:14:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:14:14 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:14:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:14:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:14:14 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 13:14:22 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:14:22 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:14:22 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:14:22 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:14:28 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 13:14:39 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T10:19
2025-01-26 13:14:39 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:14:39 INFO  o.example.migration.MigrationManager - Found 2 migrations to rollback.
2025-01-26 13:14:39 INFO  o.example.migration.MigrationManager - Rolling back migration version 2 using file R2__rollback.sql
2025-01-26 13:14:39 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R2__rollback_initial_schema.sql

-- Удаление уникального индекса на поле "name" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_name;

-- Снятие NOT NULL ограничения с поля "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name DROP NOT NULL;

-- Удаление ограничения на длину имени в таблице "departments"
ALTER TABLE departments DROP CONSTRAINT IF EXISTS chk_departments_name_length;

-- Удаление индекса на поле "department_id" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_department_id;

-- Удаление ограничений внешнего ключа из таблицы "employee_projects"
ALTER TABLE employee_projects
    DROP CONSTRAINT IF EXISTS fk_employee,
    DROP CONSTRAINT IF EXISTS fk_project;

-- Удаление уникального индекса на поля "employee_id" и "project_id" в таблице "employee_projects"
DROP INDEX IF EXISTS idx_employee_projects;
2025-01-26 13:14:39 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:14:39 INFO  o.example.migration.MigrationManager - Rolled back migration version 2 successfully.
2025-01-26 13:14:39 INFO  o.example.migration.MigrationManager - Rolling back migration version 1 using file R1__rollback.sql
2025-01-26 13:14:39 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R1__rollback_initial_schema.sql

-- Удаление всех данных из таблицы "employee_projects"
DELETE FROM employee_projects;

-- Удаление всех данных из таблицы "employees"
DELETE FROM employees;

-- Удаление всех данных из таблицы "projects"
DELETE FROM projects;

-- Удаление всех данных из таблицы "departments"
DELETE FROM departments;

-- Удаление таблицы "employee_projects"
DROP TABLE IF EXISTS employee_projects;

-- Удаление таблицы "employees"
DROP TABLE IF EXISTS employees;

-- Удаление таблицы "projects"
DROP TABLE IF EXISTS projects;

-- Удаление таблицы "departments"
DROP TABLE IF EXISTS departments;

2025-01-26 13:14:39 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:14:39 INFO  o.example.migration.MigrationManager - Rolled back migration version 1 successfully.
2025-01-26 13:14:39 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T10:19
2025-01-26 13:14:50 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:14:51 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:14:51 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:14:51 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:14:59 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 13:15:09 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T13:14
2025-01-26 13:15:09 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:15:09 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T13:14
2025-01-26 13:15:09 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T13:14
2025-01-26 13:15:35 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:15:35 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:15:35 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:15:35 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:15:41 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 13:15:58 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T10:18
2025-01-26 13:15:58 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:15:58 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T10:18
2025-01-26 13:15:58 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T10:18
2025-01-26 13:16:19 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:16:20 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:16:20 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:16:20 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:16:24 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 13:16:34 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T13:00
2025-01-26 13:16:34 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:16:34 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T13:00
2025-01-26 13:16:34 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T13:00
2025-01-26 13:16:48 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:16:49 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:16:49 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:16:49 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:16:52 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-26 13:16:52 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-26 13:16:52 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-26 13:16:52 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-26 13:16:52 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-26 13:16:52 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-26 13:16:52 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 13:17:07 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:17:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:17:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:17:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:17:11 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 13:17:20 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T13:16
2025-01-26 13:17:20 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:17:20 INFO  o.example.migration.MigrationManager - Found 2 migrations to rollback.
2025-01-26 13:17:20 INFO  o.example.migration.MigrationManager - Rolling back migration version 2 using file R2__rollback.sql
2025-01-26 13:17:20 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R2__rollback_initial_schema.sql

-- Удаление уникального индекса на поле "name" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_name;

-- Снятие NOT NULL ограничения с поля "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name DROP NOT NULL;

-- Удаление ограничения на длину имени в таблице "departments"
ALTER TABLE departments DROP CONSTRAINT IF EXISTS chk_departments_name_length;

-- Удаление индекса на поле "department_id" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_department_id;

-- Удаление ограничений внешнего ключа из таблицы "employee_projects"
ALTER TABLE employee_projects
    DROP CONSTRAINT IF EXISTS fk_employee,
    DROP CONSTRAINT IF EXISTS fk_project;

-- Удаление уникального индекса на поля "employee_id" и "project_id" в таблице "employee_projects"
DROP INDEX IF EXISTS idx_employee_projects;
2025-01-26 13:17:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:17:20 INFO  o.example.migration.MigrationManager - Rolled back migration version 2 successfully.
2025-01-26 13:17:20 INFO  o.example.migration.MigrationManager - Rolling back migration version 1 using file R1__rollback.sql
2025-01-26 13:17:20 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R1__rollback_initial_schema.sql

-- Удаление всех данных из таблицы "employee_projects"
DELETE FROM employee_projects;

-- Удаление всех данных из таблицы "employees"
DELETE FROM employees;

-- Удаление всех данных из таблицы "projects"
DELETE FROM projects;

-- Удаление всех данных из таблицы "departments"
DELETE FROM departments;

-- Удаление таблицы "employee_projects"
DROP TABLE IF EXISTS employee_projects;

-- Удаление таблицы "employees"
DROP TABLE IF EXISTS employees;

-- Удаление таблицы "projects"
DROP TABLE IF EXISTS projects;

-- Удаление таблицы "departments"
DROP TABLE IF EXISTS departments;

2025-01-26 13:17:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:17:20 INFO  o.example.migration.MigrationManager - Rolled back migration version 1 successfully.
2025-01-26 13:17:20 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T13:16
2025-01-26 13:17:26 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:17:27 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:17:27 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:17:27 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:17:31 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 13:17:42 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-26T13:16:56
2025-01-26 13:17:42 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:17:42 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T13:16:56
2025-01-26 13:17:42 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-26T13:16:56
2025-01-26 13:22:05 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:22:07 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:22:07 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:22:07 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:22:07 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:23:05 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 13:23:06 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:23:06 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 13:23:06 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:23:09 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 13:23:09 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:23:09 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:23:09 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:23:09 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:23:09 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:23:09 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 13:23:10 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 13:23:10 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:23:11 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 13:23:11 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:23:11 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:23:11 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:23:11 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:23:11 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:23:11 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:30:00 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:31:12 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:31:18 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:31:19 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:31:19 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:31:19 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:31:24 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-26 13:31:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-26 13:31:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-26 13:31:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-26 13:31:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-26 13:31:24 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-26 13:31:24 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 13:32:27 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:32:50 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:35:05 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:35:55 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 13:35:56 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:35:56 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 13:35:56 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:35:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 13:35:59 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:35:59 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:35:59 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:35:59 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:35:59 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:35:59 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 13:36:01 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:36:01 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 13:36:01 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:36:01 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:36:01 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:36:01 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:36:01 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:36:01 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:45:40 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:51:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:51:46 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 13:51:46 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 13:51:46 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 13:51:47 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 13:51:47 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 13:51:47 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 13:51:47 INFO  tc.testcontainers/ryuk:0.11.0 - Pulling docker image: testcontainers/ryuk:0.11.0. Please be patient; this may take some time but only needs to be done once.
2025-01-26 13:51:49 INFO  tc.testcontainers/ryuk:0.11.0 - Starting to pull image
2025-01-26 13:51:49 INFO  tc.testcontainers/ryuk:0.11.0 - Pulling image layers:  0 pending,  0 downloaded,  0 extracted, (0 bytes/0 bytes)
2025-01-26 13:51:51 INFO  tc.testcontainers/ryuk:0.11.0 - Pulling image layers:  2 pending,  1 downloaded,  0 extracted, (6 MB/? MB)
2025-01-26 13:51:51 INFO  tc.testcontainers/ryuk:0.11.0 - Pulling image layers:  1 pending,  2 downloaded,  0 extracted, (6 MB/? MB)
2025-01-26 13:51:51 INFO  tc.testcontainers/ryuk:0.11.0 - Pulling image layers:  0 pending,  3 downloaded,  0 extracted, (8 MB/10 MB)
2025-01-26 13:51:51 INFO  tc.testcontainers/ryuk:0.11.0 - Image testcontainers/ryuk:0.11.0 pull took PT4.3294247S
2025-01-26 13:51:51 INFO  tc.testcontainers/ryuk:0.11.0 - Pull complete. 3 layers, pulled in 2s (downloaded 8 MB at 4 MB/s)
2025-01-26 13:51:52 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 13:51:52 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 2eee879ee75ef27f05fd507d27cf42f590e9c60c5a99d08dd63df10091658598
2025-01-26 13:51:53 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.3267398S
2025-01-26 13:51:53 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 13:51:53 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 13:51:53 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 13:51:53 INFO  tc.postgres:13 - Pulling docker image: postgres:13. Please be patient; this may take some time but only needs to be done once.
2025-01-26 13:51:54 INFO  tc.postgres:13 - Starting to pull image
2025-01-26 13:51:54 INFO  tc.postgres:13 - Pulling image layers:  0 pending,  0 downloaded,  0 extracted, (0 bytes/0 bytes)
2025-01-26 13:51:55 INFO  tc.postgres:13 - Pulling image layers: 13 pending,  1 downloaded,  0 extracted, (0 bytes/? MB)
2025-01-26 13:51:55 INFO  tc.postgres:13 - Pulling image layers: 12 pending,  2 downloaded,  0 extracted, (0 bytes/? MB)
2025-01-26 13:51:55 INFO  tc.postgres:13 - Pulling image layers: 11 pending,  3 downloaded,  0 extracted, (0 bytes/? MB)
2025-01-26 13:51:55 INFO  tc.postgres:13 - Pulling image layers: 10 pending,  4 downloaded,  0 extracted, (0 bytes/? MB)
2025-01-26 13:51:55 INFO  tc.postgres:13 - Pulling image layers:  9 pending,  5 downloaded,  0 extracted, (0 bytes/? MB)
2025-01-26 13:51:56 INFO  tc.postgres:13 - Pulling image layers:  8 pending,  6 downloaded,  0 extracted, (2 MB/? MB)
2025-01-26 13:51:56 INFO  tc.postgres:13 - Pulling image layers:  7 pending,  7 downloaded,  0 extracted, (3 MB/? MB)
2025-01-26 13:51:56 INFO  tc.postgres:13 - Pulling image layers:  6 pending,  8 downloaded,  0 extracted, (4 MB/? MB)
2025-01-26 13:51:56 INFO  tc.postgres:13 - Pulling image layers:  5 pending,  9 downloaded,  0 extracted, (5 MB/? MB)
2025-01-26 13:51:56 INFO  tc.postgres:13 - Pulling image layers:  4 pending, 10 downloaded,  0 extracted, (7 MB/? MB)
2025-01-26 13:51:57 INFO  tc.postgres:13 - Pulling image layers:  3 pending, 11 downloaded,  0 extracted, (10 MB/? MB)
2025-01-26 13:51:59 INFO  tc.postgres:13 - Pulling image layers:  2 pending, 12 downloaded,  0 extracted, (33 MB/? MB)
2025-01-26 13:52:04 INFO  tc.postgres:13 - Pulling image layers:  1 pending, 13 downloaded,  0 extracted, (92 MB/? MB)
2025-01-26 13:52:09 INFO  tc.postgres:13 - Pulling image layers:  0 pending, 14 downloaded,  0 extracted, (139 MB/141 MB)
2025-01-26 13:52:13 INFO  tc.postgres:13 - Image postgres:13 pull took PT20.3808737S
2025-01-26 13:52:13 INFO  tc.postgres:13 - Pull complete. 14 layers, pulled in 19s (downloaded 139 MB at 7 MB/s)
2025-01-26 13:52:13 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 13:52:15 INFO  tc.postgres:13 - Container postgres:13 is starting: 4e573e8c3d6e2aaa5ea66c026a25293887e4afcd28c0f9325e5c6ac963d89282
2025-01-26 13:52:17 INFO  tc.postgres:13 - Container postgres:13 started in PT3.4466137S
2025-01-26 13:52:17 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61557/test_db?loggerLevel=OFF)
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T13:52:18.541547100
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:52:18 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:54:09 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 13:54:10 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:54:10 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 13:54:10 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:54:12 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 13:54:12 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:54:13 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:54:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:54:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:54:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:54:13 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 13:54:14 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:54:14 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 13:54:14 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:54:14 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:54:14 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:54:14 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:54:14 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:54:14 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:55:48 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 13:55:50 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:55:50 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 13:55:50 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:55:52 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 13:55:52 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:55:52 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:55:52 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:55:52 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:55:52 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:55:52 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:55:53 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 13:55:53 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 13:55:53 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 13:55:53 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 13:55:54 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 13:55:54 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 13:55:54 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 13:55:54 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 13:55:55 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: c7e51adfbc401974ff8cd2c584ec496cdd0f30a70fce39d5aec99448b293a0ec
2025-01-26 13:55:56 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.2312015S
2025-01-26 13:55:56 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 13:55:56 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 13:55:56 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 13:55:56 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 13:55:56 INFO  tc.postgres:13 - Container postgres:13 is starting: 003b45b9e6464e9d5aa12bf7871627f758266f489f7560515b681c7fffaa6747
2025-01-26 13:55:58 INFO  tc.postgres:13 - Container postgres:13 started in PT2.2808595S
2025-01-26 13:55:58 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61696/test_db?loggerLevel=OFF)
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T13:55:58.549698
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:55:58 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:56:00 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 13:56:00 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:56:00 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 13:56:00 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:56:01 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:56:01 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:56:01 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:56:01 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:56:01 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:58:07 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 13:58:07 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 13:58:07 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 13:58:08 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 13:58:09 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 13:58:09 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 13:58:09 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 13:58:09 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 13:58:10 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 3746597403fcc166cd9d440e1c7826379fa33361c632a03e62f023bb335f2d62
2025-01-26 13:58:10 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.0738407S
2025-01-26 13:58:10 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 13:58:10 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 13:58:10 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 13:58:10 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 13:58:11 INFO  tc.postgres:13 - Container postgres:13 is starting: 0813704051b4e1e2b028868fbf41ab99d31ce1aeb23955667f347eaf12f2e15c
2025-01-26 13:58:13 INFO  tc.postgres:13 - Container postgres:13 started in PT2.1211092S
2025-01-26 13:58:13 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61760/test_db?loggerLevel=OFF)
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T13:58:14.194440800
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:58:14 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:58:38 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 13:58:39 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:58:39 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 13:58:39 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:58:42 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 13:58:42 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 13:58:42 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 13:58:42 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 13:58:42 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 13:58:42 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 13:58:42 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 13:58:43 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 13:58:43 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 13:58:43 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 13:58:44 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 13:58:45 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 13:58:45 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 13:58:45 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 13:58:45 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 13:58:46 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: fc68f4de94f7bc02cf4805bf7d85fca104607b289fe61e35649b1d786ce0e782
2025-01-26 13:58:46 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.4845154S
2025-01-26 13:58:46 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 13:58:46 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 13:58:47 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 13:58:47 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 13:58:47 INFO  tc.postgres:13 - Container postgres:13 is starting: a3d3f3bf54f8361fa31ec84d24de959985d1d55987e26d90c1097156f8c5317a
2025-01-26 13:58:49 INFO  tc.postgres:13 - Container postgres:13 started in PT2.3360472S
2025-01-26 13:58:49 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61814/test_db?loggerLevel=OFF)
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T13:58:49.385340300
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 13:58:49 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 13:58:51 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 13:58:51 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 13:58:51 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 13:58:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 13:58:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:58:51 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:58:51 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:58:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:58:51 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:58:51 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 13:58:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 13:58:51 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 13:58:51 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 13:58:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 13:58:51 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 13:58:52 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 14:00:38 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:00:38 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 14:00:38 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 14:00:38 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 14:00:38 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 14:00:38 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 14:00:38 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 14:00:38 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 14:00:38 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 14:00:38 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 14:00:38 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 14:00:38 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 14:00:38 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 14:00:38 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 14:00:39 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 14:00:39 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 14:00:40 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 14:00:40 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 14:00:40 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 14:00:40 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 14:00:41 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 42a6ef938ab382b70fba99f3963622ecd2779cdde603cedae1f0b8d147557e24
2025-01-26 14:00:42 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.5164902S
2025-01-26 14:00:42 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 14:00:42 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 14:00:42 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 14:00:42 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 14:00:42 INFO  tc.postgres:13 - Container postgres:13 is starting: 74edd96bdc1697c385d1e0d34ac3784f8c5eb2977d582d1d41b574a4631ee5a2
2025-01-26 14:00:44 INFO  tc.postgres:13 - Container postgres:13 started in PT2.5024364S
2025-01-26 14:00:44 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61881/test_db?loggerLevel=OFF)
2025-01-26 14:00:44 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:00:44 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 14:00:44 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 14:00:44 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 14:00:44 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:00:44 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T14:00:44.917706900
2025-01-26 14:00:45 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:00:45 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 14:00:45 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 14:00:45 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 14:00:46 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 14:00:46 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 14:00:46 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 14:00:46 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 14:00:46 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 14:00:46 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 14:00:46 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 14:00:46 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 14:01:22 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:04:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:04:56 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 14:04:57 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 14:04:57 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 14:04:57 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 14:04:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 14:04:59 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 14:04:59 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 14:04:59 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 14:04:59 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 14:04:59 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 14:04:59 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidDateFormat(MigrationMainTest.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 14:05:00 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 14:05:00 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 14:05:00 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 14:05:01 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 14:05:02 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 14:05:02 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 14:05:02 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 14:05:03 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 14:05:03 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 830292e519410e52c428adb840c63f7f58fcf773f50af3e28d8becf3f4bd7bd4
2025-01-26 14:05:04 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.2806518S
2025-01-26 14:05:04 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 14:05:04 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 14:05:04 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 14:05:04 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 14:05:04 INFO  tc.postgres:13 - Container postgres:13 is starting: 41770d9e919f57f0845dc28f28adfc760d7a0a524ef5cb36ac8214f27de094ee
2025-01-26 14:05:06 INFO  tc.postgres:13 - Container postgres:13 started in PT2.0306891S
2025-01-26 14:05:06 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:62116/test_db?loggerLevel=OFF)
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T14:05:06.451787700
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 14:05:06 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 14:05:09 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 14:05:09 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 14:05:09 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 14:05:09 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 14:05:09 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 14:05:09 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 14:05:09 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 14:05:09 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 14:08:31 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 14:08:33 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 14:08:33 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 14:08:33 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 14:08:33 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:50)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 14:08:33 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 14:08:33 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 14:08:33 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 14:08:33 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 14:08:33 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:32:10 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 15:32:11 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:32:11 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 15:32:11 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:32:12 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 15:32:12 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:32:12 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:50)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:32:12 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:32:12 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:32:12 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 15:32:12 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 15:32:13 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 15:32:13 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 15:32:14 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 15:32:14 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 15:32:14 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 15:32:14 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 15:32:15 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 2ebc9767bf151083402a7db9dd714e1db354ee60c14d2a56326687154c0ee409
2025-01-26 15:32:16 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.746018S
2025-01-26 15:32:16 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 15:32:16 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 15:32:16 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 15:32:16 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 15:32:17 INFO  tc.postgres:13 - Container postgres:13 is starting: e74ef2257e94bb9b5d2c0a2e179eb262e6ac06a02d03224b1c298af49e4406c3
2025-01-26 15:32:19 INFO  tc.postgres:13 - Container postgres:13 started in PT2.9810343S
2025-01-26 15:32:19 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:63032/test_db?loggerLevel=OFF)
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T15:32:19.764161200
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:32:19 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 15:32:23 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:32:23 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 15:32:23 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:32:23 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:32:23 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:32:23 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:32:23 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:32:23 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:32:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 15:33:00 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:33:00 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 15:33:00 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:33:03 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 15:33:03 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:33:03 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:50)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:33:03 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:33:03 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:33:03 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 15:33:03 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 15:33:03 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 15:33:04 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 15:33:05 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 15:33:05 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 15:33:05 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 15:33:05 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 15:33:06 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: ef4a828e1135f96a27118dd4eff3133ca276d4f184fbcd1d04440060c27c7fb8
2025-01-26 15:33:06 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.3926707S
2025-01-26 15:33:06 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 15:33:06 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 15:33:06 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 15:33:06 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 15:33:07 INFO  tc.postgres:13 - Container postgres:13 is starting: 149ef119f355c552e2d242f53dd2e95ea560d588d3fead465499a2a04a8cda5b
2025-01-26 15:33:09 INFO  tc.postgres:13 - Container postgres:13 started in PT3.2744699S
2025-01-26 15:33:09 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:63077/test_db?loggerLevel=OFF)
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T15:33:10.015575600
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:33:10 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 15:33:12 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:33:12 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 15:33:12 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:33:12 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:33:12 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:33:12 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:33:12 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:33:12 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:36:43 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:36:44 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:36:44 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:36:44 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:36:44 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainIntegrationTest.testMain_rollbackToDate(MigrationMainIntegrationTest.java:48)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:36:44 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:36:44 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:36:44 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:36:44 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:36:44 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainIntegrationTest.testMain_runMigrations(MigrationMainIntegrationTest.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:37:44 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 15:37:45 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:37:46 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 15:37:46 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:37:48 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 15:37:48 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:37:48 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainIntegrationTest.testMain_rollbackToDate(MigrationMainIntegrationTest.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:37:48 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToDate(MigrationMainTest.java:50)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:37:48 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:37:48 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrations(MigrationMainTest.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:37:49 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 15:37:49 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 15:37:49 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 15:37:49 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 15:37:50 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 15:37:50 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 15:37:50 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 15:37:51 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 15:37:51 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: abf388f789083179ba005a4472f6eefd4e06f27ab91c8c9ec297256006d2b9ba
2025-01-26 15:37:52 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.303388S
2025-01-26 15:37:52 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 15:37:52 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 15:37:52 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 15:37:52 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 15:37:52 INFO  tc.postgres:13 - Container postgres:13 is starting: 78599298097e5c25b700da594a47fcedfd63aaae97c035537d8797d3ab7edae4
2025-01-26 15:37:54 INFO  tc.postgres:13 - Container postgres:13 started in PT2.6524823S
2025-01-26 15:37:54 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:63396/test_db?loggerLevel=OFF)
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T15:37:55.022582
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:37:55 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 15:37:57 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 15:37:57 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:37:58 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 15:37:58 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:37:58 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:37:58 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:37:58 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:37:58 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:37:58 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:40:11 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:40:13 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRunMigrationsSuccessfully(MigrationMainTest.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:40:13 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToValidDate(MigrationMainTest.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:40:13 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testRollbackToInvalidDate(MigrationMainTest.java:62)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:40:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:40:13 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainTest.testInvalidChoice(MigrationMainTest.java:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:42:18 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 15:42:19 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:42:19 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 15:42:19 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:42:21 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 15:42:21 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:42:22 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:42:22 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:42:22 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:42:22 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:42:22 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainIntegrationTest.testMain_rollbackToDate(MigrationMainIntegrationTest.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:42:22 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 15:42:22 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 15:42:22 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 15:42:23 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 15:42:24 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 15:42:24 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 15:42:24 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 15:42:24 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 15:42:24 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 722d241bdaa7004f8f0c3c5095b6f8d4d59660b9252234ee722e9e3d05563eff
2025-01-26 15:42:25 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.2953346S
2025-01-26 15:42:25 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 15:42:25 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 15:42:25 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 15:42:25 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 15:42:26 INFO  tc.postgres:13 - Container postgres:13 is starting: 0b3e712a245215e15e3867ffca3360cf934797e84c69c8921cbdf91f627f8272
2025-01-26 15:42:28 INFO  tc.postgres:13 - Container postgres:13 started in PT2.387373S
2025-01-26 15:42:28 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:63566/test_db?loggerLevel=OFF)
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T15:42:28.092808600
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:42:28 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 15:42:30 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:42:30 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 15:42:30 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:42:30 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:42:30 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:42:30 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:42:30 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:42:30 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:43:10 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 15:43:11 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:43:11 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 15:43:11 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:43:14 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 15:43:14 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:43:14 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:43:14 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:43:14 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:43:14 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:43:14 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.main(MigrationMain.java:25)
	at migration_main.MigrationMainIntegrationTest.testMain_rollbackToDate(MigrationMainIntegrationTest.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:43:15 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 15:43:15 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 15:43:15 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 15:43:16 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 15:43:17 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 15:43:17 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 15:43:17 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 15:43:17 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 15:43:18 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 9d89484729bd747ff0f2431d8bf2ed11f0084b59746e13b7aeafc235c69ab8ce
2025-01-26 15:43:19 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.9691888S
2025-01-26 15:43:19 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 15:43:19 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 15:43:19 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 15:43:19 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 15:43:20 INFO  tc.postgres:13 - Container postgres:13 is starting: cf9d74900601632883a7068e48e640c82af7e9a82bbd0a6ac3ada5b5e0142779
2025-01-26 15:43:23 INFO  tc.postgres:13 - Container postgres:13 started in PT3.3425317S
2025-01-26 15:43:23 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:63616/test_db?loggerLevel=OFF)
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T15:43:23.319992900
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:43:23 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 15:43:25 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:43:25 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 15:43:25 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:43:25 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:43:25 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:43:25 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:43:25 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:43:25 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 15:47:17 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:17 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-26 15:47:30 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-26 15:47:31 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:47:31 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-26 15:47:31 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:47:34 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-26 15:47:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:34 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainIntegrationTest.testMain_rollbackToDate(MigrationMainIntegrationTest.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-26 15:47:34 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-26 15:47:34 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-26 15:47:34 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-26 15:47:35 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-26 15:47:35 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-26 15:47:35 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-26 15:47:35 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-26 15:47:36 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-26 15:47:36 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-26 15:47:36 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-26 15:47:37 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-26 15:47:37 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: e78973a2fab8a593528a2919fdfaaac11ea6b8d39cbb09893660034812f4a49f
2025-01-26 15:47:38 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.6284837S
2025-01-26 15:47:38 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-26 15:47:38 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-26 15:47:38 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-26 15:47:38 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-26 15:47:39 INFO  tc.postgres:13 - Container postgres:13 is starting: c3c15fac653f30b471e816f22f3f42e024976675898b2bea072dd1c958078762
2025-01-26 15:47:41 INFO  tc.postgres:13 - Container postgres:13 started in PT2.6244356S
2025-01-26 15:47:41 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:63793/test_db?loggerLevel=OFF)
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-26T15:47:41.422625200
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-26 15:47:41 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-26 15:47:43 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-26 15:47:43 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-26 15:47:43 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:47:43 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:47:43 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-26 15:47:43 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-26 15:47:43 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-26 15:47:43 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-29 19:19:13 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-29 19:19:14 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-29 19:19:14 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-29 19:19:14 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-29 19:19:16 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-29 19:19:16 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-29 19:19:16 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-29 19:19:16 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:19:16 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:19:16 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:19:16 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainIntegrationTest.testMain_rollbackToDate(MigrationMainIntegrationTest.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-29 19:19:17 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:19:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:19:17 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-29 19:19:17 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-29 19:19:17 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-29 19:19:17 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-29 19:19:18 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-29 19:19:18 INFO  o.t.d.DockerMachineClientProviderStrategy - docker-machine executable was not found on PATH ([C:\Program Files\Common Files\Oracle\Java\javapath, C:\Program Files (x86)\Common Files\Oracle\Java\javapath, C:\Windows\system32, C:\Windows, C:\Windows\System32\Wbem, C:\Windows\System32\WindowsPowerShell\v1.0\, C:\Windows\System32\OpenSSH\, C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common, C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR, C:\Program Files\Git\cmd, C:\Program Files\Docker\Docker\resources\bin, C:\Users\HuNGuM\gradle-8.12-bin\gradle-8.12\bin, C:\Program Files\PostgreSQL\17\bin, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\Scripts\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Launcher\, C:\Users\HuNGuM\AppData\Local\Microsoft\WindowsApps, C:\Program Files\JetBrains\IntelliJ IDEA 2024.3\bin, , C:\Program Files\PostgreSQL\17\bin])
2025-01-29 19:19:18 ERROR o.t.d.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration. Attempted configurations were:
As no valid configuration was found, execution cannot continue.
See https://java.testcontainers.org/on_failure.html for more details.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-29 19:19:19 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-29 19:19:19 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-29 19:19:19 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:19:19 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-29 19:19:19 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-29 19:19:19 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-29 19:19:19 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-29 19:19:19 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-29 19:19:20 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-29 19:19:20 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-29 19:19:20 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-29 19:19:20 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-29 19:19:20 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-29 19:19:20 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-29 19:19:20 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-29 19:37:03 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-29 19:37:04 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-29 19:37:04 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-29 19:37:04 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-29 19:37:05 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-29 19:37:05 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-29 19:37:05 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-29 19:37:06 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-29 19:37:06 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 7676805badc12107512d2ea15051e5939d71ff2734129cb8c24f78a7d68fce3d
2025-01-29 19:37:07 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.2230024S
2025-01-29 19:37:07 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-29 19:37:07 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-29 19:37:07 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-29 19:37:07 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-29 19:37:07 INFO  tc.postgres:13 - Container postgres:13 is starting: 7ea5d0aeeb7ceb9e87abdb0502ec8f5da392f5175992c069a7e4649526bd684e
2025-01-29 19:37:09 INFO  tc.postgres:13 - Container postgres:13 started in PT2.5715759S
2025-01-29 19:37:09 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:53573/test_db?loggerLevel=OFF)
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-29T19:37:11.289271800
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-29 19:37:11 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-29 19:37:12 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-29 19:37:12 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-29 19:37:12 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-29 19:37:12 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-29 19:37:15 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-29 19:37:16 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-29 19:37:16 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-29 19:37:16 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:37:16 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:37:16 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:37:16 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainIntegrationTest.testMain_rollbackToDate(MigrationMainIntegrationTest.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-29 19:37:17 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-29 19:37:17 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-29 19:37:17 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-29 19:37:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-29 19:37:21 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-29 19:37:21 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-29 19:37:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-29 19:37:21 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-29 19:37:21 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-29 19:37:21 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-29 19:37:21 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-29 19:37:21 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-30 13:44:33 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:44:33 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:44:33 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:44:33 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-30 13:44:33 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:44:33 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:44:33 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:44:33 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-30 13:46:06 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:46:08 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 13:46:08 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:46:08 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:46:08 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-30 13:50:55 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-30 13:50:55 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-30 13:50:55 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-30 13:50:57 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-30 13:50:58 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-30 13:50:58 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-30 13:50:58 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-30 13:50:58 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-30 13:50:59 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: c74a6772efa2930762a1e4451486828c8c6da3c1565c11f33f11112018cedd7d
2025-01-30 13:50:59 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.2902076S
2025-01-30 13:50:59 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-30 13:50:59 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-30 13:50:59 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-30 13:50:59 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-30 13:51:00 INFO  tc.postgres:13 - Container postgres:13 is starting: 1fb0c190ef03bd059cf71bc7b5cd051483b8781892aaf25ce37348dadd0e567d
2025-01-30 13:51:02 INFO  tc.postgres:13 - Container postgres:13 started in PT2.831339S
2025-01-30 13:51:02 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:57087/test_db?loggerLevel=OFF)
2025-01-30 13:51:03 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:51:03 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 13:51:03 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 13:51:03 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 13:51:03 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:51:03 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-30T13:51:03.920979400
2025-01-30 13:51:04 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:51:04 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 13:51:04 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 13:51:04 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 13:51:18 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-30 13:51:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 13:51:20 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-30 13:51:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 13:51:24 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-30 13:51:24 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:51:25 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 13:51:25 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:51:25 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:51:25 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-30 13:51:26 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-30 13:51:26 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-30 13:51:26 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-30 13:51:27 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-30 13:51:28 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-30 13:51:28 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-30 13:51:28 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-30 13:51:28 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-30 13:51:29 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: fbfd96e0ba4e5cf1b893b28a860760bcb2bba6daedd8608a686a883222cae337
2025-01-30 13:51:30 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.4542379S
2025-01-30 13:51:30 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-30 13:51:30 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-30 13:51:30 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-30 13:51:30 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-30 13:51:30 INFO  tc.postgres:13 - Container postgres:13 is starting: a1824ec982410f09533ae5df1df92e0b47c932d54a878e7a37be3fc00d3f15e6
2025-01-30 13:51:33 INFO  tc.postgres:13 - Container postgres:13 started in PT2.9178148S
2025-01-30 13:51:33 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:57133/test_db?loggerLevel=OFF)
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-30T13:51:33.128939600
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 13:51:33 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-30 13:51:35 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-30 13:51:35 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-30 13:51:36 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-30 13:51:36 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-30 13:51:36 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-30 13:51:36 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-30 13:51:36 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-30 13:51:36 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-30 13:51:36 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-30 13:52:14 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-30 13:52:15 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 13:52:15 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-30 13:52:15 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 13:52:19 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-30 13:52:19 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:52:20 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 13:52:20 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 13:52:20 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 13:52:20 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-30 13:52:20 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-30 13:52:20 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-30 13:52:20 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-30 13:52:21 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-30 13:52:23 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-30 13:52:23 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-30 13:52:23 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-30 13:52:23 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-30 13:52:24 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: cbfef802261bb7319118ae31dcca23bf7aab29ac6afad837668c789f8df4537b
2025-01-30 13:52:24 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.5014187S
2025-01-30 13:52:24 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-30 13:52:24 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-30 13:52:24 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-30 13:52:24 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-30 13:52:25 INFO  tc.postgres:13 - Container postgres:13 is starting: e257bf3a4f40f17c8ed1be879c4b9a539bd12ee29e9c9d712cd6ed0b5f3d85cd
2025-01-30 13:52:26 INFO  tc.postgres:13 - Container postgres:13 started in PT2.0754853S
2025-01-30 13:52:26 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:57172/test_db?loggerLevel=OFF)
2025-01-30 13:52:26 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:52:26 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 13:52:26 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 13:52:26 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 13:52:26 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:52:26 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-30T13:52:26.966617500
2025-01-30 13:52:27 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 13:52:27 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 13:52:27 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 13:52:27 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name')
2025-01-30 13:52:29 ERROR migrations.MigrationScriptExecutor - Error executing migration: Нарушение уникального индекса или первичного ключа: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"
Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.TEST_TABLE(ID) ( /* key:1 */ 1, 'Test Name')"; SQL statement:
INSERT INTO test_table (id, name) VALUES (1, 'Another Test Name') [23505-214]
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-30 13:52:29 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-30 13:52:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-30 13:52:29 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-30 13:52:29 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-30 13:52:29 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-30 13:52:29 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-30 13:52:29 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-30 14:24:33 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-30 14:24:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 14:24:34 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-30 14:24:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 14:24:38 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-30 14:24:39 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 14:24:46 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 14:24:47 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 14:24:47 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 14:24:47 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 14:24:54 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-30 14:24:54 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 14:24:54 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 14:24:54 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 14:24:54 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 14:24:54 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-30 14:25:31 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 14:25:32 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 14:25:32 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 14:25:32 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 14:25:32 INFO  org.example.migration.MigrationMain - 

2025-01-30 14:25:47 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:32)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
2025-01-30 14:25:50 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 14:25:52 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 14:25:52 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 14:25:52 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты

2025-01-30 14:25:58 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
2025-01-30 14:26:01 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 14:26:02 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 14:26:02 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 14:26:02 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 14:26:05 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 14:26:31 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-30T14:26
2025-01-30 14:26:31 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 14:26:31 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-30T14:26
2025-01-30 14:26:31 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-30T14:26
2025-01-30 14:44:08 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 14:44:09 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 14:44:09 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 14:44:09 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 14:44:13 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-30 14:44:13 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 14:44:13 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 14:44:13 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-30 14:44:13 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-30 14:44:13 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-30 14:45:23 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 14:45:24 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 14:45:24 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 14:45:24 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 14:45:30 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-30 14:45:46 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-30T14:44
2025-01-30 14:45:46 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 14:45:46 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-30T14:44
2025-01-30 14:45:46 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-30T14:44
2025-01-30 14:46:10 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-30 14:46:11 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-30 14:46:11 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-30 14:46:11 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-30 14:46:15 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-30 14:46:15 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-30 14:46:15 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-30 14:46:15 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-30 14:46:15 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-30 14:46:15 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-30 14:46:15 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:00:11 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:00:11 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:23)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 14:03:41 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:03:41 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 14:05:48 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 14:05:49 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:05:49 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 14:05:49 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:05:52 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 14:05:52 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:05:53 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 87 common frames omitted
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:05:53 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:05:53 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:05:53 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-31 14:05:54 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 14:05:54 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 14:05:54 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 14:05:55 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 14:05:55 INFO  o.t.d.DockerMachineClientProviderStrategy - docker-machine executable was not found on PATH ([C:\Program Files\Common Files\Oracle\Java\javapath, C:\Program Files (x86)\Common Files\Oracle\Java\javapath, C:\Windows\system32, C:\Windows, C:\Windows\System32\Wbem, C:\Windows\System32\WindowsPowerShell\v1.0\, C:\Windows\System32\OpenSSH\, C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common, C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR, C:\Program Files\Git\cmd, C:\Program Files\Docker\Docker\resources\bin, C:\Users\HuNGuM\gradle-8.12-bin\gradle-8.12\bin, C:\Program Files\PostgreSQL\17\bin, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\Scripts\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Launcher\, C:\Users\HuNGuM\AppData\Local\Microsoft\WindowsApps, C:\Program Files\JetBrains\IntelliJ IDEA 2024.3\bin, , C:\Program Files\PostgreSQL\17\bin])
2025-01-31 14:05:55 ERROR o.t.d.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration. Attempted configurations were:
As no valid configuration was found, execution cannot continue.
See https://java.testcontainers.org/on_failure.html for more details.
2025-01-31 14:05:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:05:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-31 14:05:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:05:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:05:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:05:57 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:05:57 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:05:57 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:05:57 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:05:57 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:05:57 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:06:18 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:06:19 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 14:07:51 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:07:51 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 14:09:00 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:09:00 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 14:11:23 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 14:11:23 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:11:23 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 14:11:23 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:11:27 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 14:11:27 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:11:28 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 87 common frames omitted
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:11:28 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:11:28 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:11:28 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-31 14:11:28 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 14:11:28 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 14:11:28 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 14:11:29 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 14:11:29 INFO  o.t.d.DockerMachineClientProviderStrategy - docker-machine executable was not found on PATH ([C:\Program Files\Common Files\Oracle\Java\javapath, C:\Program Files (x86)\Common Files\Oracle\Java\javapath, C:\Windows\system32, C:\Windows, C:\Windows\System32\Wbem, C:\Windows\System32\WindowsPowerShell\v1.0\, C:\Windows\System32\OpenSSH\, C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common, C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR, C:\Program Files\Git\cmd, C:\Program Files\Docker\Docker\resources\bin, C:\Users\HuNGuM\gradle-8.12-bin\gradle-8.12\bin, C:\Program Files\PostgreSQL\17\bin, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\Scripts\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Launcher\, C:\Users\HuNGuM\AppData\Local\Microsoft\WindowsApps, C:\Program Files\JetBrains\IntelliJ IDEA 2024.3\bin, , C:\Program Files\PostgreSQL\17\bin])
2025-01-31 14:11:29 ERROR o.t.d.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration. Attempted configurations were:
As no valid configuration was found, execution cannot continue.
See https://java.testcontainers.org/on_failure.html for more details.
2025-01-31 14:11:31 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:11:31 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-31 14:11:31 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:11:31 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:11:31 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:11:31 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:11:31 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:11:31 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:11:31 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:11:31 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:11:31 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:13:44 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:13:44 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:13:44 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:13:44 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:13:52 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:14:06 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-31T13:40
2025-01-31 14:14:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:14:06 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-31T13:40
2025-01-31 14:14:06 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-31T13:40
2025-01-31 14:14:44 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:14:45 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:14:45 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:14:45 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:14:50 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:15:28 ERROR org.example.migration.MigrationMain - Неверный формат даты: 2025-01-30 14:46:17 
2025-01-31 14:15:58 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:15:59 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:15:59 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:15:59 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:16:11 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
2025-01-31 14:16:38 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:16:39 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:16:39 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:16:39 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:16:43 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 14:16:43 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-31 14:16:43 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 14:16:43 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 14:16:43 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 14:16:43 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 14:16:43 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:16:56 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:16:57 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:16:57 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:16:57 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:17:04 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:17:19 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-31T14:16
2025-01-31 14:17:19 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:17:19 INFO  o.example.migration.MigrationManager - Found 2 migrations to rollback.
2025-01-31 14:17:19 INFO  o.example.migration.MigrationManager - Rolling back migration version 2 using file R2__rollback.sql
2025-01-31 14:17:19 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R2__rollback_initial_schema.sql

-- Удаление уникального индекса на поле "name" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_name;

-- Снятие NOT NULL ограничения с поля "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name DROP NOT NULL;

-- Удаление ограничения на длину имени в таблице "departments"
ALTER TABLE departments DROP CONSTRAINT IF EXISTS chk_departments_name_length;

-- Удаление индекса на поле "department_id" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_department_id;

-- Удаление ограничений внешнего ключа из таблицы "employee_projects"
ALTER TABLE employee_projects
    DROP CONSTRAINT IF EXISTS fk_employee,
    DROP CONSTRAINT IF EXISTS fk_project;

-- Удаление уникального индекса на поля "employee_id" и "project_id" в таблице "employee_projects"
DROP INDEX IF EXISTS idx_employee_projects;
2025-01-31 14:17:19 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:17:19 INFO  o.example.migration.MigrationManager - Rolled back migration version 2 successfully.
2025-01-31 14:17:19 INFO  o.example.migration.MigrationManager - Rolling back migration version 1 using file R1__rollback.sql
2025-01-31 14:17:19 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: 
-- R1__rollback_initial_schema.sql

-- Удаление всех данных из таблицы "employee_projects"
DELETE FROM employee_projects;

-- Удаление всех данных из таблицы "employees"
DELETE FROM employees;

-- Удаление всех данных из таблицы "projects"
DELETE FROM projects;

-- Удаление всех данных из таблицы "departments"
DELETE FROM departments;

-- Удаление таблицы "employee_projects"
DROP TABLE IF EXISTS employee_projects;

-- Удаление таблицы "employees"
DROP TABLE IF EXISTS employees;

-- Удаление таблицы "projects"
DROP TABLE IF EXISTS projects;

-- Удаление таблицы "departments"
DROP TABLE IF EXISTS departments;

2025-01-31 14:17:19 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:17:19 INFO  o.example.migration.MigrationManager - Rolled back migration version 1 successfully.
2025-01-31 14:17:19 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-31T14:16
2025-01-31 14:18:00 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:18:01 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:18:01 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:18:01 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:18:06 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:18:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:18:06 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:18:06 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 14:18:06 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-31 14:18:06 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:18:06 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 14:18:06 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 14:18:06 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 14:18:06 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:18:17 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:18:18 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:18:18 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:18:18 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:18:22 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:18:22 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:18:22 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:18:22 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 14:18:22 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 14:18:22 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 14:18:22 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:18:22 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 14:18:22 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 14:18:22 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 14:18:22 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:18:32 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:18:33 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:18:33 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:18:33 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:18:37 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:19:15 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-31T14:18:11
2025-01-31 14:19:15 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:19:15 INFO  o.example.migration.MigrationManager - Found 1 migrations to rollback.
2025-01-31 14:19:15 INFO  o.example.migration.MigrationManager - Rolling back migration version 2 using file R2__rollback.sql
2025-01-31 14:19:15 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R2__rollback_initial_schema.sql

-- Удаление уникального индекса на поле "name" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_name;

-- Снятие NOT NULL ограничения с поля "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name DROP NOT NULL;

-- Удаление ограничения на длину имени в таблице "departments"
ALTER TABLE departments DROP CONSTRAINT IF EXISTS chk_departments_name_length;

-- Удаление индекса на поле "department_id" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_department_id;

-- Удаление ограничений внешнего ключа из таблицы "employee_projects"
ALTER TABLE employee_projects
    DROP CONSTRAINT IF EXISTS fk_employee,
    DROP CONSTRAINT IF EXISTS fk_project;

-- Удаление уникального индекса на поля "employee_id" и "project_id" в таблице "employee_projects"
DROP INDEX IF EXISTS idx_employee_projects;
2025-01-31 14:19:15 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:19:15 INFO  o.example.migration.MigrationManager - Rolled back migration version 2 successfully.
2025-01-31 14:19:15 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-31T14:18:11
2025-01-31 14:19:46 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 14:19:46 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:19:46 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 14:19:46 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:19:51 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 14:19:51 ERROR o.e.migration.MigrationExecutor - Error during migration execution: Cannot create JDBC driver of class '' for connect URL 'null'
2025-01-31 14:19:51 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:19:52 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 87 common frames omitted
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:19:52 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:19:52 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:19:52 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-31 14:19:53 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 14:19:53 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 14:19:53 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 14:19:54 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 14:19:54 INFO  o.t.d.DockerMachineClientProviderStrategy - docker-machine executable was not found on PATH ([C:\Program Files\Common Files\Oracle\Java\javapath, C:\Program Files (x86)\Common Files\Oracle\Java\javapath, C:\Windows\system32, C:\Windows, C:\Windows\System32\Wbem, C:\Windows\System32\WindowsPowerShell\v1.0\, C:\Windows\System32\OpenSSH\, C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common, C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR, C:\Program Files\Git\cmd, C:\Program Files\Docker\Docker\resources\bin, C:\Users\HuNGuM\gradle-8.12-bin\gradle-8.12\bin, C:\Program Files\PostgreSQL\17\bin, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\Scripts\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Launcher\, C:\Users\HuNGuM\AppData\Local\Microsoft\WindowsApps, C:\Program Files\JetBrains\IntelliJ IDEA 2024.3\bin, , C:\Program Files\PostgreSQL\17\bin])
2025-01-31 14:19:54 ERROR o.t.d.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration. Attempted configurations were:
As no valid configuration was found, execution cannot continue.
See https://java.testcontainers.org/on_failure.html for more details.
2025-01-31 14:19:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:19:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-31 14:19:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:19:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:19:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:19:56 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:19:56 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:19:56 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:19:56 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:19:56 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:19:56 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:21:11 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 14:21:13 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:21:13 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 14:21:13 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:21:13 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 14:21:13 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 14:21:13 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 14:21:14 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 14:21:14 INFO  o.t.d.DockerMachineClientProviderStrategy - docker-machine executable was not found on PATH ([C:\Program Files\Common Files\Oracle\Java\javapath, C:\Program Files (x86)\Common Files\Oracle\Java\javapath, C:\Windows\system32, C:\Windows, C:\Windows\System32\Wbem, C:\Windows\System32\WindowsPowerShell\v1.0\, C:\Windows\System32\OpenSSH\, C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common, C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR, C:\Program Files\Git\cmd, C:\Program Files\Docker\Docker\resources\bin, C:\Users\HuNGuM\gradle-8.12-bin\gradle-8.12\bin, C:\Program Files\PostgreSQL\17\bin, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\Scripts\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Python313\, C:\Users\HuNGuM\AppData\Local\Programs\Python\Launcher\, C:\Users\HuNGuM\AppData\Local\Microsoft\WindowsApps, C:\Program Files\JetBrains\IntelliJ IDEA 2024.3\bin, , C:\Program Files\PostgreSQL\17\bin])
2025-01-31 14:21:14 ERROR o.t.d.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration. Attempted configurations were:
As no valid configuration was found, execution cannot continue.
See https://java.testcontainers.org/on_failure.html for more details.
2025-01-31 14:21:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:21:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-31 14:21:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:21:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:21:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:21:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:21:21 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 14:21:21 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:21:21 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:21:21 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:21:21 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:21:21 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:21:21 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:21:22 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:21:22 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:21:22 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:21:22 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:21:22 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:21:22 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:21:22 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:21:22 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:22:56 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 14:22:56 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 14:22:56 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 14:22:57 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 14:22:58 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 14:22:58 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 14:22:58 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 14:22:58 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 14:22:59 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 44fdf97955a5a9ce60c21b86c6ebd63d8e177206a1f551096519b85d699f7297
2025-01-31 14:23:00 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.9346583S
2025-01-31 14:23:00 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 14:23:00 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 14:23:00 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 14:23:00 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 14:23:01 INFO  tc.postgres:13 - Container postgres:13 is starting: 730c93fb5bd62ecd43e0e8301e01ed739fff323eaf58aa19c06a22a9e17354d8
2025-01-31 14:23:05 INFO  tc.postgres:13 - Container postgres:13 started in PT5.071927S
2025-01-31 14:23:05 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:51035/test_db?loggerLevel=OFF)
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 14:23:07 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 14:23:07 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-31T14:23:07.578453800
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 14:23:07 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-31 14:23:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:23:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (2, 'New Test Name')
2025-01-31 14:23:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:23:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:23:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:23:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:23:13 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 14:23:13 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:23:13 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 14:23:13 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:23:14 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 14:23:14 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:23:14 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:23:14 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:23:14 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:23:14 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:23:15 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:23:15 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:23:15 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:23:15 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:23:15 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:28:15 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:28:15 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:28:15 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:28:15 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:28:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:28:20 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 14:28:20 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 14:28:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:28:20 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 14:28:20 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 14:31:16 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:31:16 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:31:16 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:31:16 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:33:25 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:33:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:33:25 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:33:25 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 14:33:26 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:33:26 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 14:33:26 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:33:30 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 14:33:30 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:33:30 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:33:30 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:33:30 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:33:30 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:33:30 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 14:33:31 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:33:31 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:33:31 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-31 14:33:32 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 14:33:32 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 14:33:32 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 14:33:33 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 14:33:33 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 14:33:33 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 14:33:33 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 14:33:34 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 14:33:34 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 849265e0c50bed0e6c98c73c19e0459b49dcaf917ec1c28f2d3770bbcac5e970
2025-01-31 14:33:35 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.7408356S
2025-01-31 14:33:35 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 14:33:35 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 14:33:35 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 14:33:35 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 14:33:36 INFO  tc.postgres:13 - Container postgres:13 is starting: 68509b3d3f501e78cbc0babd783962bdd698e9ca81d02b57fe22a88cb2ff4a2f
2025-01-31 14:33:38 INFO  tc.postgres:13 - Container postgres:13 started in PT3.0118804S
2025-01-31 14:33:38 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:51226/test_db?loggerLevel=OFF)
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-31T14:33:38.807378100
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 14:33:38 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-31 14:33:40 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:33:40 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 14:33:40 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 14:33:40 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 14:33:40 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 14:33:40 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:33:40 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:33:40 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 14:33:40 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 14:33:40 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 14:33:40 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 14:34:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:34:25 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:35:46 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:35:46 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:37:54 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:37:54 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:37:54 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:37:54 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:39:35 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:39:35 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:39:35 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:39:35 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:45:16 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:45:16 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:45:16 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:45:16 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:46:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:46:53 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:47:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:47:53 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 14:48:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 14:48:26 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.




///


2025-01-31 14:50:31 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:50:32 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:50:32 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:50:32 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:50:36 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 14:50:36 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-31 14:50:36 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 14:50:36 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 14:50:36 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 14:50:36 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 14:50:36 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.




///////////////



2025-01-31 14:53:34 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:53:35 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:53:35 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:53:35 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:53:40 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 14:53:40 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-31 14:53:40 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 14:53:40 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 14:53:40 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 14:53:40 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 14:53:40 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 14:56:47 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 14:56:48 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 14:56:48 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 14:56:48 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 14:57:02 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 14:57:02 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-31 14:57:02 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 14:57:02 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 14:57:02 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 14:57:02 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 14:57:02 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 15:01:39 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:01:40 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 15:01:40 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 15:01:40 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 15:01:44 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 15:01:44 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику уникального проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;


2025-01-31 15:01:44 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 15:01:44 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 15:01:44 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 15:01:44 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 15:01:44 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 15:03:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:03:01 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: Функция "PG_ADVISORY_LOCK" не найдена
Function "PG_ADVISORY_LOCK" not found; SQL statement:
SELECT pg_advisory_lock(1); [90022-214]
2025-01-31 15:03:01 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:03:01 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:03:01 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: Функция "PG_ADVISORY_LOCK" не найдена
Function "PG_ADVISORY_LOCK" not found; SQL statement:
SELECT pg_advisory_lock(1); [90022-214]
2025-01-31 15:03:01 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:03:15 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:03:15 INFO  migrations.MigrationScriptExecutor - Migration lock acquired using pg_advisory_lock.
2025-01-31 15:03:15 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:03:15 INFO  migrations.MigrationScriptExecutor - Migration lock released using pg_advisory_unlock.
2025-01-31 15:03:15 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:03:16 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:03:16 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: null
2025-01-31 15:03:16 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:04:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:04:37 INFO  migrations.MigrationScriptExecutor - Migration lock acquired using pg_advisory_lock.
2025-01-31 15:04:37 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:04:37 INFO  migrations.MigrationScriptExecutor - Migration lock released using pg_advisory_unlock.
2025-01-31 15:04:37 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:04:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:04:37 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: null
2025-01-31 15:04:37 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:04:39 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:04:39 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: Функция "PG_ADVISORY_LOCK" не найдена
Function "PG_ADVISORY_LOCK" not found; SQL statement:
SELECT pg_advisory_lock(1); [90022-214]
2025-01-31 15:04:39 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:04:39 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:04:39 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: Функция "PG_ADVISORY_LOCK" не найдена
Function "PG_ADVISORY_LOCK" not found; SQL statement:
SELECT pg_advisory_lock(1); [90022-214]
2025-01-31 15:04:39 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:06:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:06:43 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: Функция "PG_ADVISORY_LOCK" не найдена
Function "PG_ADVISORY_LOCK" not found; SQL statement:
SELECT pg_advisory_lock(1); [90022-214]
2025-01-31 15:06:43 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:06:43 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:06:43 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: Функция "PG_ADVISORY_LOCK" не найдена
Function "PG_ADVISORY_LOCK" not found; SQL statement:
SELECT pg_advisory_lock(1); [90022-214]
2025-01-31 15:06:43 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:06:47 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:06:47 INFO  migrations.MigrationScriptExecutor - Migration lock acquired using pg_advisory_lock.
2025-01-31 15:06:47 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:06:47 INFO  migrations.MigrationScriptExecutor - Migration lock released using pg_advisory_unlock.
2025-01-31 15:06:47 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:06:47 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:06:47 ERROR migrations.MigrationScriptExecutor - Failed to acquire advisory lock: null
2025-01-31 15:06:47 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:08:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:08:26 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:08:26 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:08:26 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:08:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:08:31 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:08:31 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:08:31 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:08:31 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 15:08:31 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:11:51 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:11:51 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:13:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:13:09 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:13:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:13:09 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:14:28 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:14:28 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:14:48 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:14:48 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:15:30 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:15:30 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:17:28 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:17:28 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:19:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table1 (id, name) VALUES (1, 'Test Name')
2025-01-31 15:19:37 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:19:37 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table1 (id, name) VALUES (1, 'Test Name')
2025-01-31 15:19:37 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:19:42 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:19:42 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:19:42 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:19:42 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:19:42 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 15:19:42 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:20:12 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table1 (id, name) VALUES (1, 'Test Name')
2025-01-31 15:20:12 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:20:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table1 (id, name) VALUES (1, 'Test Name')
2025-01-31 15:20:25 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:20:25 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table1 (id, name) VALUES (1, 'Test Name')
2025-01-31 15:20:25 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:20:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:20:29 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:20:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:20:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:20:29 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 15:20:29 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:23:29 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:23:29 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:24:42 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:24:42 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:24:42 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:24:42 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:24:42 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:24:42 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:24:48 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:24:48 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:24:48 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:24:48 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:27:52 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:27:53 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:27:53 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:27:53 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:27:59 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:27:59 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:27:59 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:27:59 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:27:59 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 15:27:59 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:30:47 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:30:47 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:31:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 15:31:07 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 15:31:07 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 15:31:08 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 15:31:08 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 15:31:08 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 15:31:12 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 15:31:12 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 15:31:12 ERROR org.example.migration.MigrationMain - Произошла ошибка: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Попытка откатить миграции до 2025-01-01T12:00
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Откат миграций выполнен до 2025-01-01T12:00
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 15:31:12 INFO  org.example.migration.MigrationMain - Введите дату отката в формате 'YYYY-MM-DD HH:MM:SS':
2025-01-31 15:31:12 ERROR org.example.migration.MigrationMain - Неверный формат даты: invalid-date
2025-01-31 15:31:13 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 15:31:13 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 15:31:13 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 15:31:13 WARN  org.example.migration.MigrationMain - Некорректный выбор. Завершение работы.
2025-01-31 15:31:13 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 15:31:13 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 15:31:13 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 15:31:14 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 15:31:16 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 15:31:16 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 15:31:16 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 15:31:16 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 15:31:17 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 603c56a3c9376d051d21e7a288a308169f2740438146a554369e2cfd82a14267
2025-01-31 15:31:19 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.6450615S
2025-01-31 15:31:19 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 15:31:19 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 15:31:19 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 15:31:19 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 15:31:19 INFO  tc.postgres:13 - Container postgres:13 is starting: e9e14a28fe0d246c5499fa5dffff7ffafa7ae5c33886b0f51392d01f597144ef
2025-01-31 15:31:22 INFO  tc.postgres:13 - Container postgres:13 started in PT3.0793735S
2025-01-31 15:31:22 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:52267/test_db?loggerLevel=OFF)
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - No migrations to rollback after 2025-01-31T15:31:22.211232900
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 15:31:22 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-31 15:31:24 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:31:24 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 15:31:24 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:31:24 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 15:31:24 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 15:31:24 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 15:31:24 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 15:31:24 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 15:31:24 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 15:31:24 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 15:31:24 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 15:32:52 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:32:52 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:33:48 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:33:48 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:38:19 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:38:19 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.sql.SQLException: No suitable driver
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:300)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:38:37 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:38:37 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.sql.SQLException: No suitable driver
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:300)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:38:57 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:38:58 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.sql.SQLException: No suitable driver
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:300)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:41:14 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:41:15 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:41:40 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:41:40 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL 'null'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL 'null'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.lang.NullPointerException: Cannot invoke "String.indexOf(int)" because "url" is null
	at org.postgresql.Driver.parseURL(Driver.java:559)
	at org.postgresql.Driver.acceptsURL(Driver.java:480)
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:284)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:42:52 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:42:52 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.sql.SQLException: No suitable driver
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:300)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:42:58 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:42:58 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.sql.SQLException: No suitable driver
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:300)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:43:44 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:43:44 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.sql.SQLException: No suitable driver
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:300)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:46:29 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:46:29 ERROR org.example.migration.MigrationMain - Произошла ошибка: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
java.sql.SQLException: Cannot create JDBC driver of class '' for connect URL ' jdbc:postgresql://localhost:5432/postgres'
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:75)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:459)
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:525)
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)
	at org.example.migration.DatabaseConnection.getConnection(DatabaseConnection.java:27)
	at org.example.migration.MigrationManager.<init>(MigrationManager.java:33)
	at org.example.migration.MigrationMain.main(MigrationMain.java:19)
Caused by: java.sql.SQLException: No suitable driver
	at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:300)
	at org.apache.commons.dbcp2.DriverFactory.createDriver(DriverFactory.java:60)
	... 6 common frames omitted
2025-01-31 15:47:53 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 15:47:54 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 15:47:54 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 15:47:54 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 15:48:02 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 15:48:02 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 15:48:02 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 15:48:02 INFO  o.example.migration.MigrationManager - Migration already applied: version 1, file V1__initial_schema.sql
2025-01-31 15:48:02 INFO  o.example.migration.MigrationManager - Migration already applied: version 2, file V2__add_constraints.sql
2025-01-31 15:48:02 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 17:17:20 INFO  org.example.migration.MigrationMain - Запуск программы управления миграциями...
2025-01-31 17:17:21 INFO  org.example.migration.MigrationMain - Выберите действие:
2025-01-31 17:17:21 INFO  org.example.migration.MigrationMain - 1: Выполнить миграции
2025-01-31 17:17:21 INFO  org.example.migration.MigrationMain - 2: Откатить до определённой даты
2025-01-31 17:17:36 INFO  org.example.migration.MigrationMain - Запуск миграций...
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:17:36 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:17:36 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:17:36 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:17:36 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:17:36 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:17:36 INFO  org.example.migration.MigrationMain - Миграции успешно завершены.
2025-01-31 17:22:37 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:22:38 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:22:38 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:22:38 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:22:44 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 17:22:59 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-31T17:17:20
2025-01-31 17:22:59 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:22:59 INFO  o.example.migration.MigrationManager - Found 2 migrations to rollback.
2025-01-31 17:22:59 INFO  o.example.migration.MigrationManager - Rolling back migration version 2 using file R2__rollback.sql
2025-01-31 17:22:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- R2__rollback_initial_schema.sql

-- Удаление уникального индекса на поле "name" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_name;

-- Снятие NOT NULL ограничения с поля "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name DROP NOT NULL;

-- Удаление ограничения на длину имени в таблице "departments"
ALTER TABLE departments DROP CONSTRAINT IF EXISTS chk_departments_name_length;

-- Удаление индекса на поле "department_id" в таблице "employees"
DROP INDEX IF EXISTS idx_employees_department_id;

-- Удаление ограничений внешнего ключа из таблицы "employee_projects"
ALTER TABLE employee_projects
    DROP CONSTRAINT IF EXISTS fk_employee,
    DROP CONSTRAINT IF EXISTS fk_project;

-- Удаление уникального индекса на поля "employee_id" и "project_id" в таблице "employee_projects"
DROP INDEX IF EXISTS idx_employee_projects;
2025-01-31 17:22:59 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:22:59 INFO  o.example.migration.MigrationManager - Rolled back migration version 2 successfully.
2025-01-31 17:22:59 INFO  o.example.migration.MigrationManager - Rolling back migration version 1 using file R1__rollback.sql
2025-01-31 17:22:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: 
-- R1__rollback_initial_schema.sql

-- Удаление всех данных из таблицы "employee_projects"
DELETE FROM employee_projects;

-- Удаление всех данных из таблицы "employees"
DELETE FROM employees;

-- Удаление всех данных из таблицы "projects"
DELETE FROM projects;

-- Удаление всех данных из таблицы "departments"
DELETE FROM departments;

-- Удаление таблицы "employee_projects"
DROP TABLE IF EXISTS employee_projects;

-- Удаление таблицы "employees"
DROP TABLE IF EXISTS employees;

-- Удаление таблицы "projects"
DROP TABLE IF EXISTS projects;

-- Удаление таблицы "departments"
DROP TABLE IF EXISTS departments;

2025-01-31 17:23:00 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:23:00 INFO  o.example.migration.MigrationManager - Rolled back migration version 1 successfully.
2025-01-31 17:23:00 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-31T17:17:20
2025-01-31 17:29:31 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:29:32 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:29:32 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:29:32 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:29:36 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:29:36 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:29:36 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:29:36 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:29:36 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:29:36 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:29:36 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:33:57 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:33:58 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:33:58 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:33:58 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:34:02 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:34:02 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:34:02 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:34:02 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:34:02 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:34:03 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:34:03 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:34:03 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:34:03 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:34:03 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:34:03 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:34:03 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:34:03 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:34:03 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:34:03 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:34:03 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:35:14 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:35:16 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:35:16 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:35:16 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:35:20 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:35:20 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:35:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:35:20 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:35:20 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:35:20 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:35:20 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:37:01 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:37:02 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:37:02 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:37:02 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:37:05 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:37:05 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:37:05 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:37:05 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:37:05 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:37:05 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:37:05 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:39:07 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:39:08 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:39:08 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:39:08 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:39:18 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:39:18 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:39:18 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:39:18 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:39:18 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:39:18 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:39:18 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:40:15 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:40:16 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:40:16 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:40:16 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:40:27 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:40:27 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:40:27 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:40:27 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:40:27 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:40:27 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:40:27 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:41:57 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:41:58 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:41:58 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:41:58 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:42:00 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:42:00 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:42:00 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:42:00 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:42:00 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:42:00 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:42:00 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:43:23 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:43:24 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:43:24 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:43:24 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:43:29 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:43:29 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:43:29 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:43:29 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:43:29 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:43:29 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:43:29 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:44:59 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:45:00 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:45:00 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:45:00 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:45:03 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:45:03 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:45:03 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:45:03 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:45:03 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:45:03 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:45:03 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:49:35 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:49:37 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:49:37 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:49:37 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:49:44 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:49:44 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:49:44 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:49:44 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:49:44 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:49:44 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:49:44 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:51:57 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:51:58 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:51:58 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:51:58 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:52:01 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:52:01 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:52:01 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:52:01 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:52:01 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:52:01 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:52:01 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:53:13 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:53:14 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:53:14 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:53:14 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:53:17 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:53:17 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:53:17 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:53:17 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:53:17 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:53:17 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:53:17 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:55:51 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 17:55:52 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 17:55:52 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 17:55:52 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 17:55:54 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 17:55:54 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 17:55:54 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 17:55:54 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 17:55:54 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 17:55:54 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 17:55:54 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 17:59:04 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 17:59:04 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 17:59:04 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 17:59:04 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 17:59:04 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 17:59:04 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 17:59:39 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 17:59:39 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:01:47 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:01:48 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:01:48 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:01:48 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:01:52 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:01:52 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:01:52 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:01:52 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:01:52 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:01:52 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:01:52 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:01:53 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:01:53 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:01:53 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:01:53 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:01:53 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:01:53 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:01:55 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:01:55 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:01:55 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:01:55 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:01:56 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:01:56 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 052edb30614f2ad5cbe33ebb42756105949238fa0e2969507d03644679f04f71
2025-01-31 18:01:58 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.4087866S
2025-01-31 18:01:58 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:01:58 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:01:58 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:01:58 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:01:58 INFO  tc.postgres:13 - Container postgres:13 is starting: ab86a4cb8ed5cc83a7836c9c247adf07235463d907cbeddd84a92818d111c4a1
2025-01-31 18:02:01 INFO  tc.postgres:13 - Container postgres:13 started in PT3.3269832S
2025-01-31 18:02:01 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60093/test_db?loggerLevel=OFF)
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Applying migration: version 1, file V1__initial_schema.sql
2025-01-31 18:02:01 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 18:02:01 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 1
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 1
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Applying migration: version 2, file V2__add_constraints.sql
2025-01-31 18:02:01 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V2__add_constraints.sql

-- Добавление уникального индекса на поле "name" в таблице "employees", чтобы гарантировать уникальность имени сотрудника
CREATE UNIQUE INDEX idx_employees_name ON employees(name);

-- Добавление не NULL ограничения на поле "name" в таблице "projects"
ALTER TABLE projects ALTER COLUMN name SET NOT NULL;

-- Добавление ограничения на длину имени в таблице "departments"
ALTER TABLE departments ADD CONSTRAINT chk_departments_name_length CHECK (char_length(name) >= 1);

-- Добавление индекса на поле "department_id" в таблице "employees" для ускорения поиска сотрудников по отделу
CREATE INDEX idx_employees_department_id ON employees(department_id);

-- Добавление ограничения на поля "employee_id" и "project_id" в таблице "employee_projects" для обеспечения целостности данных
ALTER TABLE employee_projects
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Добавление ограничения на уникальность в таблице "employee_projects", чтобы избежать дублирования записей
CREATE UNIQUE INDEX idx_employee_projects ON employee_projects(employee_id, project_id);

2025-01-31 18:02:01 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Executed migration from file: V2__add_constraints.sql
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Marked migration as applied: version 2
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Migration applied successfully: version 2
2025-01-31 18:02:01 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:02:01 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:02:02 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:02:02 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:02:04 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:02:04 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:02:05 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:02:05 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:02:05 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:02:05 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:02:05 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:02:05 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:02:05 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:02:05 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:02:05 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:02:05 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:02:05 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:03:47 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:03:48 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:03:48 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:03:48 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:03:51 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:03:51 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:03:51 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at org.example.migration.MigrationMain.run(MigrationMain.java:35)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
2025-01-31 18:03:51 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:06:08 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:06:08 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:06:08 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:06:08 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:06:08 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:06:08 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:06:09 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:06:09 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:06:09 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:06:09 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:06:09 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:06:10 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:06:10 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:06:10 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:06:12 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:06:12 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:06:12 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:06:12 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:06:13 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 33d886bf843ba0599925b994b8c009532eb306e46c3cee15706a84fd26a19004
2025-01-31 18:06:14 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.0763597S
2025-01-31 18:06:14 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:06:14 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:06:14 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:06:14 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:06:15 INFO  tc.postgres:13 - Container postgres:13 is starting: 4ff26c2d13d5447cd1a8442c7f14e1315838da872ad97753a8577031967103c3
2025-01-31 18:06:18 INFO  tc.postgres:13 - Container postgres:13 started in PT3.843132S
2025-01-31 18:06:18 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60169/test_db?loggerLevel=OFF)
2025-01-31 18:06:18 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:06:18 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:06:18 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:06:18 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:06:19 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:06:19 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:06:20 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:06:21 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:06:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:06:21 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:06:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:06:21 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:06:21 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:06:21 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:06:21 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:06:21 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:06:21 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:06:21 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:06:21 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:07:55 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:07:56 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:07:56 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:07:56 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:08:01 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:08:01 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:08:01 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:08:01 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:08:01 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:08:01 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:08:01 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:08:02 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:08:02 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:08:02 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:08:02 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:08:02 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:08:02 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:08:03 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:08:05 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:08:05 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:08:05 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:08:05 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:08:06 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: e15f7cf6d3b2a732c3f6d16cbc82df64ff6c31ab0966f3749324bfca5b79ef42
2025-01-31 18:08:07 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.873436S
2025-01-31 18:08:07 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:08:07 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:08:07 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:08:07 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:08:07 INFO  tc.postgres:13 - Container postgres:13 is starting: f8efd43e865fb61718bea3ab4149e8b2c9ebef61095c44124a7798381f0dfb61
2025-01-31 18:08:10 INFO  tc.postgres:13 - Container postgres:13 started in PT3.140783S
2025-01-31 18:08:10 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60222/test_db?loggerLevel=OFF)
2025-01-31 18:08:10 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:08:10 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:08:10 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:08:10 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:08:10 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:08:10 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:08:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:08:13 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:08:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:08:13 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:08:13 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:08:13 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:08:13 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:08:13 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:08:13 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:08:13 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:08:13 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:08:13 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:08:13 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:09:41 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:09:41 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:09:41 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:09:41 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:09:41 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:09:41 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:09:42 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:09:42 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:09:42 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:09:42 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:09:43 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:09:43 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:09:43 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:09:45 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:09:46 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:09:46 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:09:46 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:09:46 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:09:47 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: fd465eb26218c3a435ea84711b8d3fe5eea75a216a22df579ee8f85c45f63a10
2025-01-31 18:09:48 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.7871285S
2025-01-31 18:09:48 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:09:48 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:09:48 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:09:48 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:09:49 INFO  tc.postgres:13 - Container postgres:13 is starting: 9aaecc9221d22beb247b61461fffec8574404164501a8777a1713b02a2414b3a
2025-01-31 18:09:52 INFO  tc.postgres:13 - Container postgres:13 started in PT3.6776861S
2025-01-31 18:09:52 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60259/test_db?loggerLevel=OFF)
2025-01-31 18:09:52 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:09:52 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:09:52 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:09:52 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:09:52 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:09:52 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:09:54 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:09:54 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:09:54 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:09:54 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:09:54 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:09:54 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:09:54 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:09:54 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:09:54 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:09:54 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:09:54 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:09:54 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:09:54 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:15:55 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:15:55 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerTest.testRollbackToDate(MigrationManagerTest.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:15:56 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:16:19 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:16:19 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:16:19 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:16:20 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:16:21 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:16:21 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:16:21 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:16:22 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:16:22 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 315bb896f177933db0ab8e553f9e5d0d3426c0930c74b652f328598a616425a2
2025-01-31 18:16:23 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.7240456S
2025-01-31 18:16:23 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:16:23 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:16:23 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:16:23 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:16:24 INFO  tc.postgres:13 - Container postgres:13 is starting: c7dab87998ea71cda45d7755f861571fd49bbaa75b53a3ac50d15424436fc70d
2025-01-31 18:16:26 INFO  tc.postgres:13 - Container postgres:13 started in PT3.1809143S
2025-01-31 18:16:26 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60352/test_db?loggerLevel=OFF)
2025-01-31 18:16:26 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:16:26 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:16:26 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:16:26 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:16:27 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:16:27 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:16:40 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:16:40 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:16:40 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:16:40 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:16:40 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:16:40 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:16:40 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:16:40 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:16:40 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:16:40 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:16:40 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:16:41 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:16:41 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:16:41 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:16:41 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:16:41 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:16:41 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:16:42 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:16:44 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:16:44 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:16:44 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:16:44 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:16:45 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 6f5877ccaf33868f633914131ff1296659cb6b131da5c09de68ed05d08525753
2025-01-31 18:16:46 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.486052S
2025-01-31 18:16:46 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:16:46 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:16:46 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:16:46 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:16:46 INFO  tc.postgres:13 - Container postgres:13 is starting: 34be84ae8ab815fcf983799540c21b14c493e10926d60b9bcaab40acbbabf20b
2025-01-31 18:16:48 INFO  tc.postgres:13 - Container postgres:13 started in PT2.5526261S
2025-01-31 18:16:48 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60376/test_db?loggerLevel=OFF)
2025-01-31 18:16:48 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:16:48 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:16:48 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:16:48 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:16:48 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:16:48 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:16:50 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:16:50 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:16:50 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:16:50 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:16:50 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:16:50 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:16:51 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:16:51 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:16:51 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:16:51 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:16:51 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:16:51 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:16:51 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:21:05 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:21:05 ERROR o.example.migration.MigrationManager - Failed to read SQL file: V1__init.sql
java.nio.file.NoSuchFileException: src\main\resources\migrations\V1__init.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerTest.testReadSqlFromFile(MigrationManagerTest.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:21:45 ERROR o.example.migration.MigrationManager - Failed to read SQL file: V1_initial_schema.sql
java.nio.file.NoSuchFileException: src\main\resources\migrations\V1_initial_schema.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerTest.testReadSqlFromFile(MigrationManagerTest.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:25:34 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:25:34 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:25:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:25:34 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:25:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:25:34 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:25:34 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:25:35 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:25:35 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:25:35 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:25:35 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:25:35 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:25:35 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:25:35 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:25:36 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:25:37 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:25:37 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:25:37 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:25:37 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:25:38 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 51017e6b61f9d286ea457d0ce5d409fc6cbc3f54e0c2f9ac90c2776d064122f6
2025-01-31 18:25:39 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.6538047S
2025-01-31 18:25:39 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:25:39 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:25:39 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:25:39 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:25:39 INFO  tc.postgres:13 - Container postgres:13 is starting: 1ed9bcc748b5f725b3a57aca5c031cfd928fa6c48ed04a2db20ab29e03398a06
2025-01-31 18:25:42 INFO  tc.postgres:13 - Container postgres:13 started in PT3.141326S
2025-01-31 18:25:42 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60555/test_db?loggerLevel=OFF)
2025-01-31 18:25:42 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:25:42 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:25:42 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:25:42 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:25:42 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:25:42 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:25:44 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:25:44 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:25:44 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:25:44 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:25:44 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:25:44 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:25:44 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:25:44 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:25:44 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:25:44 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:25:44 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:25:44 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:25:44 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:27:10 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:29:44 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:29:44 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:29:44 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:29:45 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:29:46 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:29:46 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:29:46 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:29:46 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:29:47 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 917ad5052b8e9dedb0d1791c0f332f59a7d1f77ec2c15aaef91c8d18ac0b4414
2025-01-31 18:29:48 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.7672454S
2025-01-31 18:29:48 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:29:48 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:29:48 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:29:48 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:29:48 INFO  tc.postgres:13 - Container postgres:13 is starting: 0b3c777406133a4aece1bbfa932fdb69d51ed8b7c80c91b5a0e550fb72b2825a
2025-01-31 18:29:51 INFO  tc.postgres:13 - Container postgres:13 started in PT3.6096462S
2025-01-31 18:29:51 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60748/test_db?loggerLevel=OFF)
2025-01-31 18:29:52 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:32:38 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:32:38 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:32:38 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:32:39 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:32:40 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:32:40 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:32:40 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:32:40 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:32:41 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 3d2b874dc0cddb67516d627688594c7b791f47d6c1d6e55b7f66f12603d89b00
2025-01-31 18:32:42 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.4288204S
2025-01-31 18:32:42 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:32:42 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:32:42 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:32:42 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:32:42 INFO  tc.postgres:13 - Container postgres:13 is starting: e572416f19898022c859e38b8a53ccf2e2125f0def4ad919d1842be08cd5d14e
2025-01-31 18:32:44 INFO  tc.postgres:13 - Container postgres:13 started in PT2.7457585S
2025-01-31 18:32:44 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60797/test_db?loggerLevel=OFF)
2025-01-31 18:32:46 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:32:46 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:32:46 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:32:46 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:32:46 ERROR o.example.migration.MigrationManager - Failed to read SQL file: V1__init.sql
java.nio.file.NoSuchFileException: src\main\resources\migrations\V1__init.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at org.example.migration.MigrationManager.applyMigration(MigrationManager.java:210)
	at migration_manager.MigrationManagerIntegrationTest.testApplyMigration(MigrationManagerIntegrationTest.java:144)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:32:46 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:32:46 ERROR o.example.migration.MigrationManager - Failed to read SQL file: V1__init.sql
java.nio.file.NoSuchFileException: src\main\resources\migrations\V1__init.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFile(MigrationManagerIntegrationTest.java:171)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:32:47 ERROR o.example.migration.MigrationManager - Failed to read SQL file: nonexistent_file.sql
java.nio.file.NoSuchFileException: nonexistent_file.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.lambda$testReadSqlFromFileThrowsException$0(MigrationManagerIntegrationTest.java:190)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3083)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFileThrowsException(MigrationManagerIntegrationTest.java:190)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:33:40 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:33:40 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:33:40 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:33:41 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:33:43 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:33:43 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:33:43 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:33:44 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:33:44 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 1d7ef353388e656714c39c8d640bf40400d209c98c2fd1f5a76708685dd31bc0
2025-01-31 18:33:45 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.4649834S
2025-01-31 18:33:45 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:33:45 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:33:45 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:33:45 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:33:45 INFO  tc.postgres:13 - Container postgres:13 is starting: 7a41ee36e3c13c9ef9c3b0685456c7de24c61b5c1cc4841b4873645bf2f47ebb
2025-01-31 18:33:47 INFO  tc.postgres:13 - Container postgres:13 started in PT2.4379628S
2025-01-31 18:33:47 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60840/test_db?loggerLevel=OFF)
2025-01-31 18:33:49 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:33:49 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:33:49 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:33:49 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:33:49 ERROR o.example.migration.MigrationManager - Failed to read SQL file: V1__init.sql
java.nio.file.NoSuchFileException: src\main\resources\migrations\V1__init.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at org.example.migration.MigrationManager.applyMigration(MigrationManager.java:210)
	at migration_manager.MigrationManagerIntegrationTest.testApplyMigration(MigrationManagerIntegrationTest.java:144)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:33:49 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:33:49 ERROR o.example.migration.MigrationManager - Failed to read SQL file: V1__init.sql
java.nio.file.NoSuchFileException: src\main\resources\migrations\V1__init.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFile(MigrationManagerIntegrationTest.java:171)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:33:49 ERROR o.example.migration.MigrationManager - Failed to read SQL file: nonexistent_file.sql
java.nio.file.NoSuchFileException: nonexistent_file.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.lambda$testReadSqlFromFileThrowsException$0(MigrationManagerIntegrationTest.java:190)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3083)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFileThrowsException(MigrationManagerIntegrationTest.java:190)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:35:06 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:35:06 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:35:06 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:35:06 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:35:08 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:35:08 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:35:08 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:35:08 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:35:09 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: c0a75027c2b4d7a8aecafb9533f647fe9eb09d2ae1e844d563b6658a42a53bdd
2025-01-31 18:35:10 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.5640912S
2025-01-31 18:35:10 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:35:10 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:35:10 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:35:10 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:35:10 INFO  tc.postgres:13 - Container postgres:13 is starting: 32379d7b328e82a93bb77e0cd5ef0194535d7279b430d71560b6a3751b041b96
2025-01-31 18:35:13 INFO  tc.postgres:13 - Container postgres:13 started in PT3.2610136S
2025-01-31 18:35:13 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60886/test_db?loggerLevel=OFF)
2025-01-31 18:35:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:35:14 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:35:14 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:35:14 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:35:14 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 18:35:14 ERROR o.e.migration.MigrationExecutor - Error during migration execution: ОШИБКА: отношение "departments" уже существует
2025-01-31 18:35:14 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 18:35:15 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:35:15 ERROR o.example.migration.MigrationManager - Failed to read SQL file: nonexistent_file.sql
java.nio.file.NoSuchFileException: nonexistent_file.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.lambda$testReadSqlFromFileThrowsException$0(MigrationManagerIntegrationTest.java:190)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3083)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFileThrowsException(MigrationManagerIntegrationTest.java:190)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:36:25 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:36:26 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:36:26 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:36:26 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:36:31 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:36:31 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:36:31 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:36:31 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:36:31 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:36:31 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:36:31 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:36:32 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:36:32 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:36:32 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:36:32 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:36:32 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:36:32 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:36:33 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:36:35 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:36:35 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:36:35 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:36:35 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:36:36 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 668081e47876a7732fc1aea32daf5256ef4ce3e1eb2e688daa433a8589f86d63
2025-01-31 18:36:37 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.8236989S
2025-01-31 18:36:37 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:36:37 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:36:37 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:36:37 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:36:38 INFO  tc.postgres:13 - Container postgres:13 is starting: 35972a04e1a795c99a727f03765a2829988032dfd0e4b332f33b98f01e86e654
2025-01-31 18:36:40 INFO  tc.postgres:13 - Container postgres:13 started in PT3.5886527S
2025-01-31 18:36:40 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60934/test_db?loggerLevel=OFF)
2025-01-31 18:36:41 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:36:41 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:36:41 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:36:41 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:36:41 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: -- V1__initial_schema.sql

-- Создание таблицы "departments"
CREATE TABLE departments (
                             id SERIAL PRIMARY KEY,
                             name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employees"
CREATE TABLE employees (
                           id SERIAL PRIMARY KEY,
                           name VARCHAR(100) NOT NULL,
                           department_id INT REFERENCES departments(id)
);

-- Создание таблицы "projects"
CREATE TABLE projects (
                          id SERIAL PRIMARY KEY,
                          name VARCHAR(100) NOT NULL
);

-- Создание таблицы "employee_projects" (Many-to-Many связь между сотрудниками и проектами)
CREATE TABLE employee_projects (
                                   employee_id INT REFERENCES employees(id),
                                   project_id INT REFERENCES projects(id),
                                   PRIMARY KEY (employee_id, project_id)
);

-- Вставка начальных данных
-- Вставка начальных данных в таблицу "departments"
INSERT INTO departments (name)
VALUES
    ('HR'),
    ('Engineering'),
    ('Sales'),
    ('Marketing'),
    ('IT Support'),
    ('Customer Service'),
    ('Logistics'),
    ('Finance'),
    ('Legal'),
    ('Research and Development');
-- Вставка сотрудников
INSERT INTO employees (name, department_id)
VALUES
    ('Alice', 1),
    ('Bob', 2),
    ('Charlie', 3),
    ('Diana', 4),
    ('Eve', 5),
    ('Frank', 6),
    ('Grace', 7),
    ('Heidi', 8),
    ('Ivan', 9),
    ('Judy', 10),
    ('Kyle', 1),
    ('Laura', 2),
    ('Mike', 3),
    ('Nina', 4),
    ('Oscar', 5),
    ('Paul', 6),
    ('Quinn', 7),
    ('Rita', 8),
    ('Steve', 9),
    ('Tina', 10),
    ('Uma', 1),
    ('Victor', 2),
    ('Wendy', 3),
    ('Xander', 4),
    ('Yasmine', 5),
    ('Zane', 6),
    ('Aaron', 7),
    ('Bella', 8),
    ('Carl', 9),
    ('Dana', 10),
    ('Elliot', 1),
    ('Fiona', 2),
    ('Gabe', 3),
    ('Holly', 4),
    ('Ian', 5),
    ('Jack', 6),
    ('Kara', 7),
    ('Liam', 8),
    ('Mona', 9),
    ('Nolan', 10),
    ('Olivia', 1),
    ('Peter', 2),
    ('Quincy', 3),
    ('Rachel', 4),
    ('Sam', 5),
    ('Tara', 6),
    ('Ursula', 7),
    ('Vince', 8),
    ('Willow', 9),
    ('Xena', 10),
    ('Yuri', 1),
    ('Zoey', 2),
    ('Adrian', 3),
    ('Blair', 4),
    ('Cody', 5),
    ('Daphne', 6),
    ('Ethan', 7),
    ('Farrah', 8),
    ('Gordon', 9),
    ('Harper', 10),
    ('Isla', 1),
    ('Jonas', 2),
    ('Kelsey', 3),
    ('Logan', 4),
    ('Maya', 5),
    ('Nathan', 6),
    ('Olga', 7),
    ('Penny', 8),
    ('Quentin', 9),
    ('Rebecca', 10),
    ('Sophie', 1),
    ('Thomas', 2),
    ('Ulysses', 3),
    ('Valerie', 4),
    ('Warren', 5),
    ('Ximena', 6),
    ('Yara', 7),
    ('Zack', 8),
    ('Amber', 9),
    ('Brad', 10),
    ('Carmen', 1),
    ('Derek', 2),
    ('Ella', 3),
    ('Floyd', 4),
    ('Gwen', 5),
    ('Hank', 6),
    ('Ivy', 7),
    ('Jasper', 8),
    ('Kaitlyn', 9),
    ('Landon', 10),
    ('Wowa', 1),  -- Новый работник
    ('Jan', 2), -- Новый работник
    ('Misha', 3),  -- Новый работник
    ('Vanya', 4), -- Новый работник
    ('Arsenij', 5),  -- Новый работник
    ('Zhenia', 6), -- Новый работник
    ('Vita', 7),  -- Новый работник
    ('Iosif', 8),   -- Новый работник
    ('Katya', 9), -- Новый работник
    ('Petrosyan', 10);
-- Вставка начальных данных в таблицу "projects"
INSERT INTO projects (name)
VALUES
    ('Project Alpha'),
    ('Project Beta'),
    ('Project Gamma'),
    ('Project Delta'),
    ('Project Epsilon'),
    ('Project Zeta'),
    ('Project Eta'),
    ('Project Theta'),
    ('Project Iota'),
    ('Project Kappa'),
    ('Project Lambda'),
    ('Project Mu'),
    ('Project Nu'),
    ('Project Xi'),
    ('Project Omicron'),
    ('Project Pi'),
    ('Project Rho'),
    ('Project Sigma'),
    ('Project Tau'),
    ('Project Upsilon'),
    ('Project Phi'),
    ('Project Chi'),
    ('Project Psi'),
    ('Project Omega'),
    ('Project Apollo'),
    ('Project Hermes'),
    ('Project Artemis'),
    ('Project Demeter'),
    ('Project Hephaestus'),
    ('Project Poseidon');


-- Назначение каждому сотруднику проекта
INSERT INTO employee_projects (employee_id, project_id)
SELECT e.id AS employee_id, p.id AS project_id
FROM employees e
         JOIN projects p
              ON e.id % 30 + 1 = p.id;

INSERT INTO employee_projects (employee_id, project_id)
VALUES
    (1,7),
    (10,8),
    (20,9),
    (30,10);


2025-01-31 18:36:41 ERROR o.e.migration.MigrationExecutor - Error during migration execution: ОШИБКА: отношение "departments" уже существует
2025-01-31 18:36:41 INFO  o.example.migration.MigrationManager - Executed migration from file: V1__initial_schema.sql
2025-01-31 18:36:41 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:36:42 ERROR o.example.migration.MigrationManager - Failed to read SQL file: nonexistent_file.sql
java.nio.file.NoSuchFileException: nonexistent_file.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.lambda$testReadSqlFromFileThrowsException$0(MigrationManagerIntegrationTest.java:190)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3083)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFileThrowsException(MigrationManagerIntegrationTest.java:190)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:37:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:38:00 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:38:00 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:38:00 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:38:04 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:38:04 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:38:05 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:38:05 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:38:05 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:38:05 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:38:05 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:38:05 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:38:05 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:38:06 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:38:07 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:38:07 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:38:07 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:38:08 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:38:09 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 56750c23d8b2b418252310f310c4e2d74e7c85b9e6a0e47417ead5db05f089a6
2025-01-31 18:38:10 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.9017998S
2025-01-31 18:38:10 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:38:10 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:38:10 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:38:10 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:38:10 INFO  tc.postgres:13 - Container postgres:13 is starting: e517a12d4451ae4e09d6b77c7aa9feb0cd19ce1f11d7c2eed3eed57a020171dd
2025-01-31 18:38:12 INFO  tc.postgres:13 - Container postgres:13 started in PT2.3000495S
2025-01-31 18:38:12 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:60977/test_db?loggerLevel=OFF)
2025-01-31 18:38:12 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:38:12 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:38:12 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:38:12 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:38:12 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:38:12 ERROR o.example.migration.MigrationManager - Failed to read SQL file: nonexistent_file.sql
java.nio.file.NoSuchFileException: nonexistent_file.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.lambda$testReadSqlFromFileThrowsException$0(MigrationManagerIntegrationTest.java:176)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3083)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFileThrowsException(MigrationManagerIntegrationTest.java:176)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:38:14 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:39:13 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:39:13 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:39:33 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:39:41 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:39:41 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:39:41 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:39:42 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:39:43 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:39:43 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:39:43 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:39:43 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:39:43 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 84669c3e0ccf1fb36169628fcaaf0723ca74fb0b160060a1e4353c4ad06a5f55
2025-01-31 18:39:44 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.2030029S
2025-01-31 18:39:44 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:39:44 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:39:44 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:39:44 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:39:44 INFO  tc.postgres:13 - Container postgres:13 is starting: 5d612af754079cd489dc44b016b58d568a1a4fa82e22a91186dbb25315937c4c
2025-01-31 18:39:47 INFO  tc.postgres:13 - Container postgres:13 started in PT2.5040027S
2025-01-31 18:39:47 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61054/test_db?loggerLevel=OFF)
2025-01-31 18:39:48 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:39:48 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:39:48 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:39:48 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:39:48 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:39:48 ERROR o.example.migration.MigrationManager - Failed to read SQL file: nonexistent_file.sql
java.nio.file.NoSuchFileException: nonexistent_file.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.lambda$testReadSqlFromFileThrowsException$0(MigrationManagerIntegrationTest.java:176)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3083)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFileThrowsException(MigrationManagerIntegrationTest.java:176)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:39:56 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:39:58 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:39:58 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:39:58 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:40:02 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:40:02 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:03 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:40:03 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:40:04 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:04 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:04 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:40:04 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:40:04 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:40:04 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:40:06 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:40:07 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:40:07 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:40:07 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:40:07 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:40:08 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 393417ecac362413048f5090783b957497861d575cad702cde1c06b1c2a94a16
2025-01-31 18:40:08 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.5163498S
2025-01-31 18:40:08 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:40:08 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:40:09 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:40:09 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:40:09 INFO  tc.postgres:13 - Container postgres:13 is starting: 876ade7828311d3044396ef6ba905860d0d30b425c9d54b72db2bd194b15ea22
2025-01-31 18:40:11 INFO  tc.postgres:13 - Container postgres:13 started in PT2.5800389S
2025-01-31 18:40:11 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61085/test_db?loggerLevel=OFF)
2025-01-31 18:40:11 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:40:11 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:40:11 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:40:11 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:40:11 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:40:11 ERROR o.example.migration.MigrationManager - Failed to read SQL file: nonexistent_file.sql
java.nio.file.NoSuchFileException: nonexistent_file.sql
	at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
	at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
	at java.base/sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:234)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:379)
	at java.base/java.nio.file.Files.newByteChannel(Files.java:431)
	at java.base/java.nio.file.Files.readAllBytes(Files.java:3268)
	at org.example.migration.MigrationManager.readSqlFromFile(MigrationManager.java:227)
	at migration_manager.MigrationManagerIntegrationTest.lambda$testReadSqlFromFileThrowsException$0(MigrationManagerIntegrationTest.java:176)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3083)
	at migration_manager.MigrationManagerIntegrationTest.testReadSqlFromFileThrowsException(MigrationManagerIntegrationTest.java:176)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:40:13 INFO  o.example.migration.MigrationManager - Found 4 migration files.
2025-01-31 18:40:49 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:40:52 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:40:52 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:40:52 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:40:56 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:40:56 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:57 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:40:57 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:40:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:40:57 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:40:57 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:40:57 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:40:57 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:40:59 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:41:00 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:41:00 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:41:01 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:41:01 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:41:01 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: cb07a481efd229974763aa5ed1ccd18de4b1215598051765dba6bbce0c1ab881
2025-01-31 18:41:02 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.3122375S
2025-01-31 18:41:02 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:41:02 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:41:02 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:41:02 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:41:02 INFO  tc.postgres:13 - Container postgres:13 is starting: d1af6bd17cbb9ed10e55066f36afe7ee3e3dd1f3bfca3391e0a00ce23bf8d9bc
2025-01-31 18:41:04 INFO  tc.postgres:13 - Container postgres:13 started in PT2.2912448S
2025-01-31 18:41:04 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61131/test_db?loggerLevel=OFF)
2025-01-31 18:41:04 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:41:04 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:79)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:41:04 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:41:04 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:83)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:41:05 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:41:05 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:61)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:41:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:41:07 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:41:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:41:07 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:41:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:41:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:41:07 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:41:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:41:07 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:41:07 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:41:07 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:41:07 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:41:07 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:41:57 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:41:59 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:41:59 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:41:59 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:42:52 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:42:53 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:42:53 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:42:53 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:42:57 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:42:57 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:42:57 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:42:57 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:42:57 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:42:58 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:42:58 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:42:58 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:42:58 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:42:58 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:42:58 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:42:58 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:42:59 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:43:01 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:43:01 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:43:01 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:43:02 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:43:02 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: fb4bd232fe8010e998239485ff396d0c902a7fe99f512356b7b5940a0b74835c
2025-01-31 18:43:03 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.5484923S
2025-01-31 18:43:03 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:43:03 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:43:03 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:43:03 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:43:04 INFO  tc.postgres:13 - Container postgres:13 is starting: 4bd4b2088f56d8fc86762e4d80ae2319362fc8cb10536fd14e1fae88c99bdeb2
2025-01-31 18:43:06 INFO  tc.postgres:13 - Container postgres:13 started in PT2.3181177S
2025-01-31 18:43:06 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61202/test_db?loggerLevel=OFF)
2025-01-31 18:43:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:43:06 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:79)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:43:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:43:06 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:83)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:43:06 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:43:06 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:61)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:43:09 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:43:09 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:43:10 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:43:10 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:43:10 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:43:10 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:43:10 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:43:10 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:43:10 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:43:10 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:43:10 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:43:10 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:43:10 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:43:48 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:43:50 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:43:50 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:43:50 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:43:55 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:43:55 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:43:55 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:43:55 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:43:55 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:43:55 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:43:55 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:43:56 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:43:56 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:43:56 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:43:56 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:43:56 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:43:56 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:43:58 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:43:59 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:43:59 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:44:00 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:44:00 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:44:01 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: f2f949b563731f3605cc745a91f26c9fceda2b8d7efa836db00506116b4b9c08
2025-01-31 18:44:02 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.8471361S
2025-01-31 18:44:02 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:44:02 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:44:02 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:44:02 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:44:02 INFO  tc.postgres:13 - Container postgres:13 is starting: e982b1d886198ef273697c120bb525f8aadcc8cbf5f8eed7ff2cb8355ab4fa41
2025-01-31 18:44:04 INFO  tc.postgres:13 - Container postgres:13 started in PT2.3608876S
2025-01-31 18:44:04 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61240/test_db?loggerLevel=OFF)
2025-01-31 18:44:04 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:44:04 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:79)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:44:04 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:44:04 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:83)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:44:04 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:44:04 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:61)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:44:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:44:07 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:44:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:44:07 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:44:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:44:07 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:44:07 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:44:07 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:44:07 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:44:07 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:44:07 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:44:07 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:44:07 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:45:45 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS another_table (id INT, description VARCHAR(255)); INSERT INTO another_table (id, description) VALUES (1, 'Description');
2025-01-31 18:45:46 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:45:46 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: CREATE TABLE IF NOT EXISTS test_table (id INT, name VARCHAR(255)); INSERT INTO test_table (id, name) VALUES (1, 'Test');
2025-01-31 18:45:46 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:45:49 INFO  o.e.migration.MigrationExecutor - Starting migration execution with script: SELECT * FROM test_table
2025-01-31 18:45:50 INFO  o.e.migration.MigrationExecutor - Migration executed successfully.
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Migration management program started...
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:45:50 ERROR org.example.migration.MigrationMain - An error occurred: null
java.util.NoSuchElementException: null
	at java.base/java.util.Scanner.throwFor(Scanner.java:945)
	at java.base/java.util.Scanner.next(Scanner.java:1602)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2267)
	at java.base/java.util.Scanner.nextInt(Scanner.java:2221)
	at org.example.migration.MigrationMain.run(MigrationMain.java:31)
	at org.example.migration.MigrationMain.main(MigrationMain.java:20)
	at migration_main.MigrationMainTest.testMain_rollbackToDate(MigrationMainTest.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Running migrations...
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Migrations completed successfully.
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Attempting to rollback migrations to 2025-01-01T12:00
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Rollback completed to 2025-01-01T12:00
2025-01-31 18:45:50 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:45:51 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:45:51 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:45:51 INFO  org.example.migration.MigrationMain - Enter the rollback date in the format 'YYYY-MM-DD HH:MM:SS':
2025-01-31 18:45:51 ERROR org.example.migration.MigrationMain - Invalid date format: invalid-date
2025-01-31 18:45:51 INFO  org.example.migration.MigrationMain - Select an action:
2025-01-31 18:45:51 INFO  org.example.migration.MigrationMain - 1: Run migrations
2025-01-31 18:45:51 INFO  org.example.migration.MigrationMain - 2: Rollback to a specific date
2025-01-31 18:45:51 WARN  org.example.migration.MigrationMain - Invalid choice. Program will exit.
2025-01-31 18:45:51 INFO  org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 18:45:51 INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 18:45:51 INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 18:45:52 INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 18:45:53 INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-01-31 18:45:53 INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 18:45:53 INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.3.1
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7784 MB
  Labels: 
    com.docker.desktop.address=npipe://\\.\pipe\docker_cli
2025-01-31 18:45:53 INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 18:45:54 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 2e18b5909de13e8b7be28178216f2f8cb315426597c6a64fb07841c63b456c10
2025-01-31 18:45:55 INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT1.645624S
2025-01-31 18:45:55 INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 18:45:55 INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 18:45:55 INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 18:45:55 INFO  tc.postgres:13 - Creating container for image: postgres:13
2025-01-31 18:45:55 INFO  tc.postgres:13 - Container postgres:13 is starting: 48de9572ec33635c72c9a0c5cea04bab0adc9355f3e8dcd9b4920b6c7e289ab8
2025-01-31 18:45:57 INFO  tc.postgres:13 - Container postgres:13 started in PT2.1358944S
2025-01-31 18:45:57 INFO  tc.postgres:13 - Container is started (JDBC URL: jdbc:postgresql://localhost:61299/test_db?loggerLevel=OFF)
2025-01-31 18:45:57 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:45:57 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:79)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:45:57 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:45:57 ERROR o.example.migration.MigrationManager - Error during rollback: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.rollbackToDate(MigrationManager.java:69)
	at migration_manager.MigrationManagerIntegrationTest.testRollbackMigrations(MigrationManagerIntegrationTest.java:83)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:45:57 INFO  o.example.migration.MigrationManager - Migration table created or already exists.
2025-01-31 18:45:57 ERROR o.example.migration.MigrationManager - Error during migration process: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "migration_lock_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2674)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2364)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:354)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:484)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:404)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:162)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:136)
	at org.example.migration.MigrationManager.createMigrationTableIfNotExists(MigrationManager.java:140)
	at org.example.migration.MigrationManager.runMigrations(MigrationManager.java:40)
	at migration_manager.MigrationManagerIntegrationTest.testRunMigrations(MigrationManagerIntegrationTest.java:61)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-01-31 18:45:59 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: INSERT INTO test_table (id, name) VALUES (1, 'Test Name')
2025-01-31 18:45:59 WARN  migrations.MigrationScriptExecutor - Migration is already locked. Skipping execution.
2025-01-31 18:45:59 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:45:59 INFO  migrations.MigrationScriptExecutor - Migration executed successfully.
2025-01-31 18:45:59 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:45:59 INFO  migrations.MigrationScriptExecutor - Starting migration with SQL: CREATE TABLE test(id INT)
2025-01-31 18:45:59 ERROR migrations.MigrationScriptExecutor - Error executing migration: null
2025-01-31 18:45:59 INFO  migrations.MigrationScriptExecutor - Autocommit restored to its original state.
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:45:59 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:45:59 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - SQL is safe for execution.
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM test_table
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - SQL syntax is valid.
2025-01-31 18:45:59 WARN  migrations.MigrationValidator - Destructive operation detected in SQL: DROP TABLE test_table
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - Validating SQL syntax: SELECT * FROM non_existing_table
2025-01-31 18:45:59 ERROR migrations.MigrationValidator - SQL syntax is invalid: Syntax error
2025-01-31 18:45:59 INFO  migrations.MigrationValidator - SQL is safe for execution.
